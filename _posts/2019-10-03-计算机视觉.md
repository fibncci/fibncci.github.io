---
layout: post
title: "è®¡ç®—æœºè§†è§‰-ç½‘ç»œæš—ç‰©è´¨"
date: 2019-10-03
tag: æ—¥å¿—
---









## Python Numpyæ•™ç¨‹

> â€‹	æœ¬æ•™ç¨‹ç”±Justin Johnsonè´¡çŒ®ã€‚

![cs231n-è®¡ç®—æœºè§†è§‰](/images/posts/ml/cs231n-è®¡ç®—æœºè§†è§‰.png)

![cs231n-è®¡ç®—æœºè§†è§‰](../images/posts/ml/cs231n-è®¡ç®—æœºè§†è§‰.png)

```
åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Pythonç¼–ç¨‹è¯­è¨€è¿›è¡Œæ‰€æœ‰ä½œä¸šã€‚Pythonæœ¬èº«å°±æ˜¯ä¸€ç§å‡ºè‰²çš„é€šç”¨ç¼–ç¨‹è¯­è¨€ï¼Œä½†æ˜¯åœ¨ä¸€äº›æµè¡Œçš„åº“ï¼ˆnumpyï¼Œscipyï¼Œmatplotlibï¼‰çš„å¸®åŠ©ä¸‹ï¼ŒPythonæˆä¸ºäº†ç§‘å­¦è®¡ç®—çš„å¼ºå¤§ç¯å¢ƒã€‚
æˆ‘ä»¬å¸Œæœ›ä½ ä»¬ä¸­çš„è®¸å¤šäººéƒ½ä¼šå¯¹Pythonå’Œnumpyæœ‰ä¸€å®šçš„ç»éªŒï¼›å¯¹äºå…¶ä½™çš„äººï¼Œæœ¬èŠ‚å°†ä½œä¸ºé€Ÿæˆè¯¾ç¨‹ï¼Œå†…å®¹æ¶‰åŠPythonç¼–ç¨‹è¯­è¨€ä»¥åŠä½¿ç”¨Pythonè¿›è¡Œç§‘å­¦è®¡ç®—ã€‚
ä½ ä»¬ä¸­çš„æŸäº›äººå¯èƒ½å¯¹Matlabæœ‰æ‰€äº†è§£ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜å»ºè®®numpy for Matlabç”¨æˆ·é¡µé¢ã€‚
æ‚¨è¿˜å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°æœ¬æ•™ç¨‹çš„IPythonç¬”è®°æœ¬ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬ç”±Volodymyr Kuleshovå’ŒIsaac Caswellä¸ºCS 228åˆ›å»ºã€‚

```



ç›®å½•ï¼š

- Python
  - [åŸºæœ¬æ•°æ®ç±»å‹ Basic data types](http://cs231n.github.io/python-numpy-tutorial/#python-basic)
  - é›†è£…ç®±Containers
    - [æ¸…å•Lists](http://cs231n.github.io/python-numpy-tutorial/#python-lists)
    - [è¾å…¸](http://cs231n.github.io/python-numpy-tutorial/#python-dicts)Dictionaries
    - [é›†Sets](http://cs231n.github.io/python-numpy-tutorial/#python-sets)
    - [å…ƒç»„Tuples](http://cs231n.github.io/python-numpy-tutorial/#python-tuples)
  - [èŒèƒ½Functions](http://cs231n.github.io/python-numpy-tutorial/#python-functions)
  - [ç±»Classes](http://cs231n.github.io/python-numpy-tutorial/#python-classes)
- Numpy
  - [æ•°ç»„Arrays](http://cs231n.github.io/python-numpy-tutorial/#numpy-arrays)
  - [æ•°ç»„ç´¢å¼•Array indexing](http://cs231n.github.io/python-numpy-tutorial/#numpy-array-indexing)
  - [èµ„æ–™ç±»å‹Datatypes](http://cs231n.github.io/python-numpy-tutorial/#numpy-datatypes)
  - [æ•°ç»„æ•°å­¦Array math](http://cs231n.github.io/python-numpy-tutorial/#numpy-math)
  - [å¹¿æ’­Broadcasting](http://cs231n.github.io/python-numpy-tutorial/#numpy-broadcasting)
- SciPyçš„
  - [å½±åƒæ“ä½œImage operations](http://cs231n.github.io/python-numpy-tutorial/#scipy-image)
  - [MATLABæ–‡ä»¶ MATLAB files](http://cs231n.github.io/python-numpy-tutorial/#scipy-matlab)
  - [ç‚¹ä¹‹é—´çš„è·ç¦»Distance between points](http://cs231n.github.io/python-numpy-tutorial/#scipy-dist)
- Matplotlib
  - [ç»˜åˆ¶Plotting](http://cs231n.github.io/python-numpy-tutorial/#matplotlib-plotting)
  - [æ¬¡è¦æƒ…èŠ‚Subplots -å­å›¾](http://cs231n.github.io/python-numpy-tutorial/#matplotlib-subplots)
  - [å›¾ç‰‡images](http://cs231n.github.io/python-numpy-tutorial/#matplotlib-images)



## python

Pythonæ˜¯ä¸€ç§é«˜çº§çš„ï¼ŒåŠ¨æ€ç±»å‹åŒ–çš„å¤šèŒƒä¾‹ç¼–ç¨‹è¯­è¨€ã€‚Pythonä»£ç é€šå¸¸è¢«ç§°ä¸ºå‡ ä¹ç±»ä¼¼äºä¼ªä»£ç ï¼Œå› ä¸ºå®ƒä½¿æ‚¨å¯ä»¥åœ¨å¾ˆå°‘çš„ä»£ç è¡Œä¸­è¡¨è¾¾éå¸¸å¼ºå¤§çš„æ€æƒ³ï¼ŒåŒæ—¶åˆæ˜“äºé˜…è¯»ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯ç»å…¸çš„å¿«é€Ÿæ’åºç®—æ³•åœ¨Pythonä¸­çš„å®ç°ï¼š

```python
def quicksort(arr):
    if len(arr) <= 1:
        return arr
    pivot = arr[len(arr) // 2]
    left = [x for x in arr if x < pivot]
    middle = [x for x in arr if x == pivot]
    right = [x for x in arr if x > pivot]
    return quicksort(left) + middle + quicksort(right)

print(quicksort([3,6,8,10,1,2,1]))
# Prints "[1, 1, 2, 3, 6, 8, 10]"
```

### Pythonç‰ˆæœ¬versions

å½“å‰æœ‰ä¸¤ç§ä¸åŒçš„å—æ”¯æŒçš„Pythonç‰ˆæœ¬2.7å’Œ3.5ã€‚ä»¤äººå›°æƒ‘çš„æ˜¯ï¼ŒPython 3.0å¯¹è¯¥è¯­è¨€è¿›è¡Œäº†è®¸å¤šå‘åå…¼å®¹çš„æ›´æ”¹ï¼Œå› æ­¤ä¸º2.7ç¼–å†™çš„ä»£ç åœ¨3.5ä¸‹å¯èƒ½æ— æ³•å·¥ä½œï¼Œåä¹‹äº¦ç„¶ã€‚å¯¹äºæ­¤ç±»ï¼Œæ‰€æœ‰ä»£ç éƒ½å°†ä½¿ç”¨Python 3.5ã€‚

æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œæ¥åœ¨å‘½ä»¤è¡Œä¸­æ£€æŸ¥Pythonç‰ˆæœ¬ `python --version`ã€‚



### åŸºæœ¬æ•°æ®ç±»å‹

åƒå¤§å¤šæ•°è¯­è¨€ä¸€æ ·ï¼ŒPythonæœ‰è®¸å¤šåŸºæœ¬ç±»å‹ï¼ŒåŒ…æ‹¬æ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œå¸ƒå°”å€¼å’Œå­—ç¬¦ä¸²ã€‚è¿™äº›æ•°æ®ç±»å‹ä»¥å…¶ä»–ç¼–ç¨‹è¯­è¨€æ‰€ç†Ÿæ‚‰çš„æ–¹å¼è¿è¡Œã€‚

**æ•°å­—ï¼š**æ•´æ•°å’Œæµ®ç‚¹æ•°çš„å·¥ä½œæ–¹å¼ä¸æ‚¨æœŸæœ›çš„å…¶ä»–è¯­è¨€ä¸€æ ·ï¼š

```python
x = 3
print(type(x)) # Prints "<class 'int'>"
print(x)       # Prints "3"
print(x + 1)   # Addition; prints "4"
print(x - 1)   # Subtraction; prints "2"
print(x * 2)   # Multiplication; prints "6"
print(x ** 2)  # Exponentiation; prints "9"
x += 1
print(x)  # Prints "4"
x *= 2
print(x)  # Prints "8"
y = 2.5
print(type(y)) # Prints "<class 'float'>"
print(y, y + 1, y * 2, y ** 2) # Prints "2.5 3.5 5.0 6.25"
```

è¯·æ³¨æ„ï¼Œä¸è®¸å¤šè¯­è¨€ä¸åŒï¼ŒPythonæ²¡æœ‰ä¸€å…ƒçš„å¢é‡ï¼ˆ`x++`ï¼‰æˆ–å‡é‡ï¼ˆ`x--`ï¼‰è¿ç®—ç¬¦ã€‚

Pythonè¿˜å…·æœ‰ç”¨äºå¤æ•°çš„å†…ç½®ç±»å‹ã€‚æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](https://docs.python.org/3.5/library/stdtypes.html#numeric-types-int-float-complex)æ‰¾åˆ°æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ ã€‚

**å¸ƒå°”ï¼š** Pythonä¸­å®ç°æ‰€æœ‰é€šå¸¸çš„è¿è¥å•†çš„å¸ƒå°”é€»è¾‘çš„ï¼Œä½†ä½¿ç”¨è‹±è¯­è¯è¯­è€Œéç¬¦å·ï¼ˆ`&&`ï¼Œ`||`ç­‰ï¼‰ï¼š

```python
t = True
f = False
print(type(t)) # Prints "<class 'bool'>"
print(t and f) # Logical AND; prints "False"
print(t or f)  # Logical OR; prints "True"
print(not t)   # Logical NOT; prints "False"
print(t != f)  # Logical XOR; prints "True"
```

**å­—ç¬¦ä¸²ï¼š** Pythonå¯¹å­—ç¬¦ä¸²æœ‰å¾ˆå¥½çš„æ”¯æŒï¼š

```python
hello = 'hello'    # String literals can use single quotes
world = "world"    # or double quotes; it does not matter.
print(hello)       # Prints "hello"
print(len(hello))  # String length; prints "5"
hw = hello + ' ' + world  # String concatenation
print(hw)  # prints "hello world"
hw12 = '%s %s %d' % (hello, world, 12)  # sprintf style string formatting
print(hw12)  # prints "hello world 12"
```

å­—ç¬¦ä¸²å¯¹è±¡æœ‰å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š

```python
s = "hello"
print(s.capitalize())  # Capitalize a string; prints "Hello"
print(s.upper())       # Convert a string to uppercase; prints "HELLO"
print(s.rjust(7))      # Right-justify a string, padding with spaces; prints "  hello"
print(s.center(7))     # Center a string, padding with spaces; prints " hello "
print(s.replace('l', '(ell)'))  # Replace all instances of one substring with another;
                                # prints "he(ell)(ell)o"
print('  world '.strip())  # Strip leading and trailing whitespace; prints "world"
```

æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](https://docs.python.org/3.5/library/stdtypes.html#string-methods)æ‰¾åˆ°æ‰€æœ‰å­—ç¬¦ä¸²æ–¹æ³•çš„åˆ—è¡¨ã€‚



### é›†è£…ç®±

PythonåŒ…æ‹¬å‡ ç§å†…ç½®çš„å®¹å™¨ç±»å‹ï¼šåˆ—è¡¨ï¼Œå­—å…¸ï¼Œé›†åˆå’Œå…ƒç»„ã€‚



#### æ¸…å•Lists

åˆ—è¡¨ä¸æ•°ç»„çš„Pythonç­‰æ•ˆï¼Œä½†å¯è°ƒæ•´å¤§å°ï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„å…ƒç´ ï¼š

```python
xs = [3, 1, 2]    # Create a list
print(xs, xs[2])  # Prints "[3, 1, 2] 2"
print(xs[-1])     # Negative indices count from the end of the list; prints "2"
xs[2] = 'foo'     # Lists can contain elements of different types
print(xs)         # Prints "[3, 1, 'foo']"
xs.append('bar')  # Add a new element to the end of the list
print(xs)         # Prints "[3, 1, 'foo', 'bar']"
x = xs.pop()      # Remove and return the last element of the list
print(x, xs)      # Prints "bar [3, 1, 'foo']"
```

ä¸å¾€å¸¸ä¸€æ ·ï¼Œæ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](https://docs.python.org/3.5/tutorial/datastructures.html#more-on-lists)æ‰¾åˆ°æœ‰å…³åˆ—è¡¨çš„æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ ã€‚

**åˆ‡ç‰‡slicingï¼š** é™¤äº†ä¸€æ¬¡è®¿é—®ä¸€ä¸ªåˆ—è¡¨å…ƒç´ ï¼ŒPythonè¿˜æä¾›äº†ç®€æ´çš„è¯­æ³•æ¥è®¿é—®å­åˆ—è¡¨ã€‚è¿™ç§°ä¸º*åˆ‡ç‰‡*ï¼š

```python
nums = list(range(5))     # range is a built-in function that creates a list of integers
print(nums)               # Prints "[0, 1, 2, 3, 4]"
print(nums[2:4])          # Get a slice from index 2 to 4 (exclusive); prints "[2, 3]"
print(nums[2:])           # Get a slice from index 2 to the end; prints "[2, 3, 4]"
print(nums[:2])           # Get a slice from the start to index 2 (exclusive); prints "[0, 1]"
print(nums[:])            # Get a slice of the whole list; prints "[0, 1, 2, 3, 4]"
print(nums[:-1])          # Slice indices can be negative; prints "[0, 1, 2, 3]"
nums[2:4] = [8, 9]        # Assign a new sublist to a slice
print(nums)               # Prints "[0, 1, 8, 9, 4]"
```

æˆ‘ä»¬å°†åœ¨numpyæ•°ç»„çš„ä¸Šä¸‹æ–‡ä¸­å†æ¬¡çœ‹åˆ°åˆ‡ç‰‡ã€‚

**å¾ªç¯loopsï¼š**æ‚¨å¯ä»¥åƒè¿™æ ·å¾ªç¯éå†åˆ—è¡¨çš„å…ƒç´ ï¼š

```python
animals = ['cat', 'dog', 'monkey']
for animal in animals:
    print(animal)
# Prints "cat", "dog", "monkey", each on its own line.
```

å¦‚æœè¦è®¿é—®å¾ªç¯ä½“å†…æ¯ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œè¯·ä½¿ç”¨å†…ç½®`enumerate`å‡½æ•°ï¼š

```python
animals = ['cat', 'dog', 'monkey']
for idx, animal in enumerate(animals):
    print('#%d: %s' % (idx + 1, animal))
# Prints "#1: cat", "#2: dog", "#3: monkey", each on its own line
```

**åˆ—è¡¨ç†è§£ï¼š** ç¼–ç¨‹æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸å¸Œæœ›å°†ä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹ã€‚ä½œä¸ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹è®¡ç®—å¹³æ–¹æ•°çš„ä»£ç ï¼š

```
nums = [0, 1, 2, 3, 4]
squares = []
for x in nums:
    squares.append(x ** 2)
print(squares)   # Prints [0, 1, 4, 9, 16]
```

æ‚¨å¯ä»¥ä½¿ç”¨**åˆ—è¡¨æ¨å¯¼å¼** ç®€åŒ–æ­¤ä»£ç ï¼š 

```python
nums = [0, 1, 2, 3, 4]
squares = [x ** 2 for x in nums]
print(squares)   # Prints [0, 1, 4, 9, 16]
```

åˆ—è¡¨æ¨å¯¼ä¹Ÿå¯ä»¥åŒ…å«æ¡ä»¶ï¼š

```
nums = [0, 1, 2, 3, 4]
even_squares = [x ** 2 for x in nums if x % 2 == 0]
print(even_squares)  # Prints "[0, 4, 16]"
```



#### è¾å…¸Dictionaries

å­—å…¸å­˜å‚¨ï¼ˆé”®ï¼Œå€¼ï¼‰å¯¹ï¼Œç±»ä¼¼äº`Map`Javaä¸­çš„æˆ–Javascriptä¸­çš„å¯¹è±¡ã€‚æ‚¨å¯ä»¥åƒè¿™æ ·ä½¿ç”¨å®ƒï¼š

```python
d = {'cat': 'cute', 'dog': 'furry'}  # Create a new dictionary with some data
print(d['cat'])       # Get an entry from a dictionary; prints "cute"
print('cat' in d)     # Check if a dictionary has a given key; prints "True"
d['fish'] = 'wet'     # Set an entry in a dictionary
print(d['fish'])      # Prints "wet"
# print(d['monkey'])  # KeyError: 'monkey' not a key of d
print(d.get('monkey', 'N/A'))  # Get an element with a default; prints "N/A"
print(d.get('fish', 'N/A'))    # Get an element with a default; prints "wet"
del d['fish']         # Remove an element from a dictionary
print(d.get('fish', 'N/A')) # "fish" is no longer a key; prints "N/A"
```

æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](https://docs.python.org/3.5/library/stdtypes.html#dict)æ‰¾åˆ°æ‰€æœ‰éœ€è¦äº†è§£çš„å­—å…¸ ã€‚

**å¾ªç¯loopsï¼š**å¾ˆå®¹æ˜“éå†å­—å…¸ä¸­çš„é”®ï¼š

```python
d = {'person': 2, 'cat': 4, 'spider': 8}
for animal in d:
    legs = d[animal]
    print('A %s has %d legs' % (animal, legs))
# Prints "A person has 2 legs", "A cat has 4 legs", "A spider has 8 legs"
```

å¦‚æœè¦è®¿é—®é”®åŠå…¶ç›¸åº”çš„å€¼ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹`items`æ–¹æ³•ï¼š

```python
d = {'person': 2, 'cat': 4, 'spider': 8}
for animal, legs in d.items():
    print('A %s has %d legs' % (animal, legs))
# Prints "A person has 2 legs", "A cat has 4 legs", "A spider has 8 legs"
```

**å­—å…¸ç†è§£ï¼š** è¿™äº›ç±»ä¼¼äºåˆ—è¡¨ç†è§£ï¼Œä½†æ˜¯ä½¿æ‚¨å¯ä»¥è½»æ¾æ„å»ºå­—å…¸ã€‚ä¾‹å¦‚ï¼š

```python
nums = [0, 1, 2, 3, 4]
even_num_to_square = {x: x ** 2 for x in nums if x % 2 == 0}
print(even_num_to_square)  # Prints "{0: 0, 2: 4, 4: 16}"
```



#### Setsé›†

é›†åˆæ˜¯ä¸åŒå…ƒç´ çš„æ— åºé›†åˆã€‚ä½œä¸ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹å†…å®¹ï¼š

```python
animals = {'cat', 'dog'}
print('cat' in animals)   # Check if an element is in a set; prints "True"
print('fish' in animals)  # prints "False"
animals.add('fish')       # Add an element to a set
print('fish' in animals)  # Prints "True"
print(len(animals))       # Number of elements in a set; prints "3"
animals.add('cat')        # Adding an element that is already in the set does nothing
print(len(animals))       # Prints "3"
animals.remove('cat')     # Remove an element from a set
print(len(animals))       # Prints "2"
```

åƒå¾€å¸¸ä¸€æ ·ï¼Œæ‚¨æƒ³è¦äº†è§£çš„æœ‰å…³é›†çš„æ‰€æœ‰ä¿¡æ¯éƒ½å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](https://docs.python.org/3.5/library/stdtypes.html#set)æ‰¾åˆ° ã€‚

**å¾ªç¯ï¼šloops** åœ¨é›†åˆä¸Šè¿›è¡Œè¿­ä»£ä¸åœ¨åˆ—è¡¨ä¸Šè¿›è¡Œè¿­ä»£å…·æœ‰ç›¸åŒçš„è¯­æ³•ï¼›ä½†æ˜¯ï¼Œç”±äºé›†åˆæ˜¯æ— åºçš„ï¼Œå› æ­¤æ— æ³•å‡è®¾è®¿é—®é›†åˆå…ƒç´ çš„é¡ºåºï¼š

```python
animals = {'cat', 'dog', 'fish'}
for idx, animal in enumerate(animals):
    print('#%d: %s' % (idx + 1, animal))
# Prints "#1: fish", "#2: dog", "#3: cat"
```

**é›†çš„ç†è§£ï¼š** åƒåˆ—è¡¨å’Œå­—å…¸ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é›†çš„ç†è§£è½»æ¾åœ°æ„å»ºé›†ï¼š

```python
from math import sqrt
nums = {int(sqrt(x)) for x in range(30)}
print(nums)  # Prints "{0, 1, 2, 3, 4, 5}"
```



#### å…ƒç»„

å…ƒç»„æ˜¯ï¼ˆä¸å¯å˜çš„ï¼‰æœ‰åºå€¼åˆ—è¡¨ã€‚å…ƒç»„åœ¨å¾ˆå¤šæ–¹é¢ç±»ä¼¼äºåˆ—è¡¨ã€‚æœ€é‡è¦çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ï¼Œå…ƒç»„å¯ä»¥ç”¨ä½œå­—å…¸ä¸­çš„é”®å’Œé›†åˆçš„å…ƒç´ ï¼Œè€Œåˆ—è¡¨åˆ™ä¸èƒ½ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š

```python
d = {(x, x + 1): x for x in range(10)}  # Create a dictionary with tuple keys
t = (5, 6)        # Create a tuple
print(type(t))    # Prints "<class 'tuple'>"
print(d[t])       # Prints "5"
print(d[(1, 2)])  # Prints "1"
```

[è¯¥æ–‡æ¡£](https://docs.python.org/3.5/tutorial/datastructures.html#tuples-and-sequences)åŒ…å«æœ‰å…³å…ƒç»„çš„æ›´å¤šä¿¡æ¯ã€‚



### èŒèƒ½Functions -å‡½æ•°

Pythonå‡½æ•°æ˜¯ä½¿ç”¨`def`å…³é”®å­—å®šä¹‰çš„ã€‚ä¾‹å¦‚ï¼š

```python
def sign(x):
    if x > 0:
        return 'positive'
    elif x < 0:
        return 'negative'
    else:
        return 'zero'

for x in [-1, 0, 1]:
    print(sign(x))
# Prints "negative", "zero", "positive"
```

æˆ‘ä»¬ç»å¸¸ä¼šå®šä¹‰å‡½æ•°ä»¥é‡‡ç”¨å¯é€‰çš„å…³é”®å­—å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```python
def hello(name, loud=False):
    if loud:
        print('HELLO, %s!' % name.upper())
    else:
        print('Hello, %s' % name)

hello('Bob') # Prints "Hello, Bob"
hello('Fred', loud=True)  # Prints "HELLO, FRED!"
```

[æ–‡æ¡£ä¸­æœ‰](https://docs.python.org/3.5/tutorial/controlflow.html#defining-functions)å…³äºPythonå‡½æ•°çš„æ›´å¤šä¿¡æ¯ ã€‚



### ç±»classes

åœ¨Pythonä¸­å®šä¹‰ç±»çš„è¯­æ³•å¾ˆç®€å•ï¼š

```python
class Greeter(object):

    # Constructor
    def __init__(self, name):
        self.name = name  # Create an instance variable

    # Instance method
    def greet(self, loud=False):
        if loud:
            print('HELLO, %s!' % self.name.upper())
        else:
            print('Hello, %s' % self.name)

g = Greeter('Fred')  # Construct an instance of the Greeter class
g.greet()            # Call an instance method; prints "Hello, Fred"
g.greet(loud=True)   # Call an instance method; prints "HELLO, FRED!"
```

æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](https://docs.python.org/3.5/tutorial/classes.html)é˜…è¯»æœ‰å…³Pythonç±»çš„æ›´å¤šä¿¡æ¯ ã€‚



## Numpy

[Numpy](http://www.numpy.org/)æ˜¯Pythonä¸­ç§‘å­¦è®¡ç®—çš„æ ¸å¿ƒåº“ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé«˜æ€§èƒ½çš„å¤šç»´æ•°ç»„å¯¹è±¡ï¼Œä»¥åŠç”¨äºå¤„ç†è¿™äº›æ•°ç»„çš„å·¥å…·ã€‚å¦‚æœæ‚¨å·²ç»ç†Ÿæ‚‰MATLABï¼Œåˆ™å¯èƒ½ä¼šå‘ç° [æœ¬æ•™ç¨‹å¯¹äº](https://docs.scipy.org/doc/numpy/user/numpy-for-matlab-users.html) Numpyå…¥é—¨[å¾ˆæœ‰](https://docs.scipy.org/doc/numpy/user/numpy-for-matlab-users.html)ç”¨ã€‚



### æ•°ç»„arrays

numpyæ•°ç»„æ˜¯æ‰€æœ‰ç›¸åŒç±»å‹çš„å€¼çš„ç½‘æ ¼ï¼Œå¹¶ç”±éè´Ÿæ•´æ•°å…ƒç»„ç´¢å¼•ã€‚ç»´æ•°æ˜¯æ•°ç»„çš„*ç­‰çº§*ã€‚ æ•°ç»„çš„*å½¢çŠ¶*æ˜¯ä¸€ä¸ªæ•´æ•°å…ƒç»„ï¼Œç»™å‡ºæ²¿æ¯ä¸ªç»´åº¦çš„æ•°ç»„å¤§å°ã€‚

æˆ‘ä»¬å¯ä»¥ä»åµŒå¥—çš„Pythonåˆ—è¡¨åˆå§‹åŒ–numpyæ•°ç»„ï¼Œå¹¶ä½¿ç”¨æ–¹æ‹¬å·è®¿é—®å…ƒç´ ï¼š

```python
import numpy as np

a = np.array([1, 2, 3])   # Create a rank 1 array
print(type(a))            # Prints "<class 'numpy.ndarray'>"
print(a.shape)            # Prints "(3,)"
print(a[0], a[1], a[2])   # Prints "1 2 3"
a[0] = 5                  # Change an element of the array
print(a)                  # Prints "[5, 2, 3]"

b = np.array([[1,2,3],[4,5,6]])    # Create a rank 2 array
print(b.shape)                     # Prints "(2, 3)"
print(b[0, 0], b[0, 1], b[1, 0])   # Prints "1 2 4"
```

Numpyè¿˜æä¾›äº†è®¸å¤šåˆ›å»ºæ•°ç»„çš„åŠŸèƒ½ï¼š

```python
import numpy as np

a = np.zeros((2,2))   # Create an array of all zeros
print(a)              # Prints "[[ 0.  0.]
                      #          [ 0.  0.]]"

b = np.ones((1,2))    # Create an array of all ones
print(b)              # Prints "[[ 1.  1.]]"

c = np.full((2,2), 7)  # Create a constant array
print(c)               # Prints "[[ 7.  7.]
                       #          [ 7.  7.]]"

d = np.eye(2)         # Create a 2x2 identity matrix
print(d)              # Prints "[[ 1.  0.]
                      #          [ 0.  1.]]"

e = np.random.random((2,2))  # Create an array filled with random values
print(e)                     # Might print "[[ 0.91940167  0.08143941]
                             #               [ 0.68744134  0.87236687]]"
```

æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](http://docs.scipy.org/doc/numpy/user/basics.creation.html#arrays-creation)é˜…è¯»æœ‰å…³æ•°ç»„åˆ›å»ºçš„å…¶ä»–æ–¹æ³• [çš„ä¿¡æ¯](http://docs.scipy.org/doc/numpy/user/basics.creation.html#arrays-creation)ã€‚



### æ•°ç»„ç´¢å¼•

Numpyæä¾›äº†å‡ ç§ç´¢å¼•æ•°ç»„çš„æ–¹æ³•ã€‚

**åˆ‡ç‰‡ï¼š** ç±»ä¼¼äºPythonåˆ—è¡¨ï¼Œå¯ä»¥åˆ‡ç‰‡numpyæ•°ç»„ã€‚ç”±äºæ•°ç»„å¯èƒ½æ˜¯å¤šç»´çš„ï¼Œå› æ­¤å¿…é¡»ä¸ºæ•°ç»„çš„æ¯ä¸ªç»´åº¦æŒ‡å®šä¸€ä¸ªåˆ‡ç‰‡ï¼š

```python
import numpy as np

# Create the following rank 2 array with shape (3, 4)
# [[ 1  2  3  4]
#  [ 5  6  7  8]
#  [ 9 10 11 12]]
a = np.array([[1,2,3,4], [5,6,7,8], [9,10,11,12]])

# Use slicing to pull out the subarray consisting of the first 2 rows
# and columns 1 and 2; b is the following array of shape (2, 2):
# [[2 3]
#  [6 7]]
b = a[:2, 1:3]

# A slice of an array is a view into the same data, so modifying it
# will modify the original array.
print(a[0, 1])   # Prints "2"
b[0, 0] = 77     # b[0, 0] is the same piece of data as a[0, 1]
print(a[0, 1])   # Prints "77"
```

æ‚¨ä¹Ÿå¯ä»¥å°†æ•´æ•°ç´¢å¼•ä¸åˆ‡ç‰‡ç´¢å¼•æ··åˆä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšå°†äº§ç”Ÿæ¯”åŸå§‹æ•°ç»„ä½çº§çš„æ•°ç»„ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸MATLABå¤„ç†æ•°ç»„åˆ‡ç‰‡çš„æ–¹å¼å®Œå…¨ä¸åŒï¼š

```python
import numpy as np

# Create the following rank 2 array with shape (3, 4)
# [[ 1  2  3  4]
#  [ 5  6  7  8]
#  [ 9 10 11 12]]
a = np.array([[1,2,3,4], [5,6,7,8], [9,10,11,12]])

# Two ways of accessing the data in the middle row of the array.
# Mixing integer indexing with slices yields an array of lower rank,
# while using only slices yields an array of the same rank as the
# original array:
row_r1 = a[1, :]    # Rank 1 view of the second row of a
row_r2 = a[1:2, :]  # Rank 2 view of the second row of a
print(row_r1, row_r1.shape)  # Prints "[5 6 7 8] (4,)"
print(row_r2, row_r2.shape)  # Prints "[[5 6 7 8]] (1, 4)"

# We can make the same distinction when accessing columns of an array:
col_r1 = a[:, 1]
col_r2 = a[:, 1:2]
print(col_r1, col_r1.shape)  # Prints "[ 2  6 10] (3,)"
print(col_r2, col_r2.shape)  # Prints "[[ 2]
                             #          [ 6]
                             #          [10]] (3, 1)"
```

**æ•´æ•°æ•°ç»„ç´¢å¼•ï¼š** ä½¿ç”¨åˆ‡ç‰‡ç´¢å¼•åˆ°numpyæ•°ç»„æ—¶ï¼Œæ‰€å¾—çš„æ•°ç»„è§†å›¾å°†å§‹ç»ˆæ˜¯åŸå§‹æ•°ç»„çš„å­æ•°ç»„ã€‚ç›¸åï¼Œæ•´æ•°æ•°ç»„ç´¢å¼•ä½¿æ‚¨å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªæ•°ç»„ä¸­çš„æ•°æ®æ„é€ ä»»æ„æ•°ç»„ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š

```python
import numpy as np

a = np.array([[1,2], [3, 4], [5, 6]])

# An example of integer array indexing.
# The returned array will have shape (3,) and
print(a[[0, 1, 2], [0, 1, 0]])  # Prints "[1 4 5]"

# The above example of integer array indexing is equivalent to this:
print(np.array([a[0, 0], a[1, 1], a[2, 0]]))  # Prints "[1 4 5]"

# When using integer array indexing, you can reuse the same
# element from the source array:
print(a[[0, 0], [1, 1]])  # Prints "[2 2]"

# Equivalent to the previous integer array indexing example
print(np.array([a[0, 1], a[0, 1]]))  # Prints "[2 2]"
```

æ•´æ•°æ•°ç»„ç´¢å¼•çš„ä¸€ä¸ªæœ‰ç”¨æŠ€å·§æ˜¯ä»çŸ©é˜µçš„æ¯ä¸€è¡Œä¸­é€‰æ‹©æˆ–æ›´æ”¹ä¸€ä¸ªå…ƒç´ ï¼š

```python
import numpy as np

# Create a new array from which we will select elements
a = np.array([[1,2,3], [4,5,6], [7,8,9], [10, 11, 12]])

print(a)  # prints "array([[ 1,  2,  3],
          #                [ 4,  5,  6],
          #                [ 7,  8,  9],
          #                [10, 11, 12]])"

# Create an array of indices
b = np.array([0, 2, 0, 1])

# Select one element from each row of a using the indices in b
print(a[np.arange(4), b])  # Prints "[ 1  6  7 11]"

# Mutate one element from each row of a using the indices in b
a[np.arange(4), b] += 10

print(a)  # prints "array([[11,  2,  3],
          #                [ 4,  5, 16],
          #                [17,  8,  9],
          #                [10, 21, 12]])
```

**å¸ƒå°”æ•°ç»„ç´¢å¼•ï¼š** å¸ƒå°”æ•°ç»„ç´¢å¼•ä½¿æ‚¨å¯ä»¥æŒ‘é€‰å‡ºæ•°ç»„çš„ä»»æ„å…ƒç´ ã€‚é€šå¸¸ï¼Œè¿™ç§ç±»å‹çš„ç´¢å¼•ç”¨äºé€‰æ‹©æ»¡è¶³æŸäº›æ¡ä»¶çš„æ•°ç»„å…ƒç´ ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š

```python
import numpy as np

a = np.array([[1,2], [3, 4], [5, 6]])

bool_idx = (a > 2)   # Find the elements of a that are bigger than 2;
                     # this returns a numpy array of Booleans of the same
                     # shape as a, where each slot of bool_idx tells
                     # whether that element of a is > 2.

print(bool_idx)      # Prints "[[False False]
                     #          [ True  True]
                     #          [ True  True]]"

# We use boolean array indexing to construct a rank 1 array
# consisting of the elements of a corresponding to the True values
# of bool_idx
print(a[bool_idx])  # Prints "[3 4 5 6]"

# We can do all of the above in a single concise statement:
print(a[a > 2])     # Prints "[3 4 5 6]"
```

ä¸ºç®€ä¾¿èµ·è§ï¼Œæˆ‘ä»¬çœç•¥äº†æœ‰å…³numpyæ•°ç»„ç´¢å¼•çš„è®¸å¤šè¯¦ç»†ä¿¡æ¯ã€‚å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯· [é˜…è¯»æ–‡æ¡£](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)ã€‚



### èµ„æ–™ç±»å‹

æ¯ä¸ªnumpyæ•°ç»„éƒ½æ˜¯ç›¸åŒç±»å‹çš„å…ƒç´ çš„ç½‘æ ¼ã€‚Numpyæä¾›äº†å¤§é‡å¯ç”¨äºæ„é€ æ•°ç»„çš„æ•°å­—æ•°æ®ç±»å‹ã€‚åœ¨åˆ›å»ºæ•°ç»„æ—¶ï¼ŒNumpyä¼šå°è¯•çŒœæµ‹ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œä½†æ˜¯æ„é€ æ•°ç»„çš„å‡½æ•°é€šå¸¸è¿˜åŒ…å«ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œä»¥æ˜ç¡®æŒ‡å®šè¯¥æ•°æ®ç±»å‹ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š

```python
import numpy as np

x = np.array([1, 2])   # Let numpy choose the datatype
print(x.dtype)         # Prints "int64"

x = np.array([1.0, 2.0])   # Let numpy choose the datatype
print(x.dtype)             # Prints "float64"

x = np.array([1, 2], dtype=np.int64)   # Force a particular datatype
print(x.dtype)                         # Prints "int64"
```

æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](http://docs.scipy.org/doc/numpy/reference/arrays.dtypes.html)é˜…è¯»æœ‰å…³numpyæ•°æ®ç±»å‹çš„æ‰€æœ‰ä¿¡æ¯ ã€‚



### æ•°ç»„æ•°å­¦array math

åŸºæœ¬æ•°å­¦å‡½æ•°åœ¨æ•°ç»„ä¸Šé€å…ƒç´ è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”å¯ç”¨ä½œè¿ç®—ç¬¦é‡è½½å’Œnumpyæ¨¡å—ä¸­çš„å‡½æ•°ï¼š

```python
import numpy as np

x = np.array([[1,2],[3,4]], dtype=np.float64)
y = np.array([[5,6],[7,8]], dtype=np.float64)

# Elementwise sum; both produce the array
# [[ 6.0  8.0]
#  [10.0 12.0]]
print(x + y)
print(np.add(x, y))

# Elementwise difference; both produce the array
# [[-4.0 -4.0]
#  [-4.0 -4.0]]
print(x - y)
print(np.subtract(x, y))

# Elementwise product; both produce the array
# [[ 5.0 12.0]
#  [21.0 32.0]]
print(x * y)
print(np.multiply(x, y))

# Elementwise division; both produce the array
# [[ 0.2         0.33333333]
#  [ 0.42857143  0.5       ]]
print(x / y)
print(np.divide(x, y))

# Elementwise square root; produces the array
# [[ 1.          1.41421356]
#  [ 1.73205081  2.        ]]
print(np.sqrt(x))
```

è¯·æ³¨æ„ï¼Œä¸MATLABä¸åŒï¼Œå®ƒ`*`æ˜¯é€å…ƒç´ ä¹˜æ³•ï¼Œè€Œä¸æ˜¯çŸ©é˜µä¹˜æ³•ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨è¯¥`dot`å‡½æ•°æ¥è®¡ç®—å‘é‡çš„å†…ç§¯ï¼Œå°†å‘é‡ä¹˜ä»¥çŸ©é˜µä»¥åŠå°†çŸ©é˜µç›¸ä¹˜ã€‚`dot`å¯ä½œä¸ºnumpyæ¨¡å—ä¸­çš„å‡½æ•°å’Œæ•°ç»„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•ä½¿ç”¨ï¼š

```python
import numpy as np

x = np.array([[1,2],[3,4]])
y = np.array([[5,6],[7,8]])

v = np.array([9,10])
w = np.array([11, 12])

# Inner product of vectors; both produce 219
print(v.dot(w))
print(np.dot(v, w))

# Matrix / vector product; both produce the rank 1 array [29 67]
print(x.dot(v))
print(np.dot(x, v))

# Matrix / matrix product; both produce the rank 2 array
# [[19 22]
#  [43 50]]
print(x.dot(y))
print(np.dot(x, y))
```

Numpyæä¾›äº†è®¸å¤šæœ‰ç”¨çš„å‡½æ•°æ¥å¯¹æ•°ç»„æ‰§è¡Œè®¡ç®—ã€‚æœ€æœ‰ç”¨çš„ä¹‹ä¸€æ˜¯`sum`ï¼š

```python
import numpy as np

x = np.array([[1,2],[3,4]])

print(np.sum(x))  # Compute sum of all elements; prints "10"
print(np.sum(x, axis=0))  # Compute sum of each column; prints "[4 6]"
print(np.sum(x, axis=1))  # Compute sum of each row; prints "[3 7]"
```

æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](http://docs.scipy.org/doc/numpy/reference/routines.math.html)æ‰¾åˆ°numpyæä¾›çš„æ•°å­¦å‡½æ•°çš„å®Œæ•´åˆ—è¡¨ ã€‚

é™¤äº†ä½¿ç”¨æ•°ç»„è®¡ç®—æ•°å­¦å‡½æ•°å¤–ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦é‡æ•´å½¢æˆ–ä»¥å…¶ä»–æ–¹å¼å¤„ç†æ•°ç»„ä¸­çš„æ•°æ®ã€‚è¿™ç§æ“ä½œæœ€ç®€å•çš„ä¾‹å­æ˜¯è½¬ç½®çŸ©é˜µã€‚è¦è½¬ç½®çŸ©é˜µï¼Œåªéœ€ä½¿ç”¨`T`æ•°ç»„å¯¹è±¡çš„å±æ€§ï¼š

```python
import numpy as np

x = np.array([[1,2], [3,4]])
print(x)    # Prints "[[1 2]
            #          [3 4]]"
print(x.T)  # Prints "[[1 3]
            #          [2 4]]"

# Note that taking the transpose of a rank 1 array does nothing:
v = np.array([1,2,3])
print(v)    # Prints "[1 2 3]"
print(v.T)  # Prints "[1 2 3]"
```



### å¹¿æ’­Broadcasting

å¹¿æ’­æ˜¯ä¸€ç§å¼ºå¤§çš„æœºåˆ¶ï¼Œå…è®¸numpyåœ¨æ‰§è¡Œç®—æœ¯è¿ç®—æ—¶ä½¿ç”¨ä¸åŒå½¢çŠ¶çš„æ•°ç»„ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè¾ƒå°çš„æ•°ç»„å’Œä¸€ä¸ªè¾ƒå¤§çš„æ•°ç»„ï¼Œå¹¶ä¸”æˆ‘ä»¬æƒ³å¤šæ¬¡ä½¿ç”¨è¾ƒå°çš„æ•°ç»„å¯¹è¾ƒå¤§çš„æ•°ç»„æ‰§è¡ŒæŸäº›æ“ä½œã€‚

ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬è¦å‘çŸ©é˜µçš„æ¯ä¸€è¡Œæ·»åŠ ä¸€ä¸ªå¸¸æ•°å‘é‡ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š

```python
import numpy as np

# We will add the vector v to each row of the matrix x,
# storing the result in the matrix y
x = np.array([[1,2,3], [4,5,6], [7,8,9], [10, 11, 12]])
v = np.array([1, 0, 1])
y = np.empty_like(x)   # Create an empty matrix with the same shape as x

# Add the vector v to each row of the matrix x with an explicit loop
for i in range(4):
    y[i, :] = x[i, :] + v

# Now y is the following
# [[ 2  2  4]
#  [ 5  5  7]
#  [ 8  8 10]
#  [11 11 13]]
print(y)
```

è¿™æœ‰æ•ˆï¼›ä½†æ˜¯ï¼Œå½“çŸ©é˜µ`x`å¾ˆå¤§æ—¶ï¼Œåœ¨Pythonä¸­è®¡ç®—æ˜¾å¼å¾ªç¯å¯èƒ½ä¼šå¾ˆæ…¢ã€‚è¯·æ³¨æ„ï¼Œå°†å‘é‡æ·»åŠ `v`åˆ°çŸ©é˜µçš„æ¯ä¸€è¡Œ `x`ç›¸å½“äº`vv`é€šè¿‡`v`å‚ç›´å †å å¤šä¸ªå‰¯æœ¬ï¼Œç„¶åå¯¹`x`å’Œè¿›è¡Œå…ƒç´ æ±‚å’Œæ¥å½¢æˆçŸ©é˜µ`vv`ã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·å®ç°è¿™ç§æ–¹æ³•ï¼š

```python
import numpy as np

# We will add the vector v to each row of the matrix x,
# storing the result in the matrix y
x = np.array([[1,2,3], [4,5,6], [7,8,9], [10, 11, 12]])
v = np.array([1, 0, 1])
vv = np.tile(v, (4, 1))   # Stack 4 copies of v on top of each other
print(vv)                 # Prints "[[1 0 1]
                          #          [1 0 1]
                          #          [1 0 1]
                          #          [1 0 1]]"
y = x + vv  # Add x and vv elementwise
print(y)  # Prints "[[ 2  2  4
          #          [ 5  5  7]
          #          [ 8  8 10]
          #          [11 11 13]]"
```

Numpyå¹¿æ’­ä½¿æˆ‘ä»¬æ— éœ€å®é™…åˆ›å»ºçš„å¤šä¸ªå‰¯æœ¬å³å¯æ‰§è¡Œæ­¤è®¡ç®—`v`ã€‚è€ƒè™‘ä»¥ä¸‹ç‰ˆæœ¬ï¼Œä½¿ç”¨å¹¿æ’­ï¼š

```python
import numpy as np

# We will add the vector v to each row of the matrix x,
# storing the result in the matrix y
x = np.array([[1,2,3], [4,5,6], [7,8,9], [10, 11, 12]])
v = np.array([1, 0, 1])
y = x + v  # Add v to each row of x using broadcasting
print(y)  # Prints "[[ 2  2  4]
          #          [ 5  5  7]
          #          [ 8  8 10]
          #          [11 11 13]]"
```

è¯¥çº¿`y = x + v`å³ä½¿`x`å…·æœ‰å½¢çŠ¶`(4, 3)`å¹¶ä¸”ç”±äºå¹¿æ’­è€Œ`v`å…·æœ‰å½¢çŠ¶ä¹Ÿ `(3,)`å¯ä»¥å·¥ä½œï¼›è¿™æ¡çº¿å°±åƒ`v`å®é™…å…·æœ‰shapeä¸€æ ·å·¥ä½œ`(4, 3)`ï¼Œå…¶ä¸­æ¯ä¸€è¡Œéƒ½æ˜¯çš„å‰¯æœ¬`v`ï¼Œå¹¶ä¸”æ€»å’Œæ˜¯æŒ‰å…ƒç´ è¿›è¡Œçš„ã€‚

ä¸€èµ·å¹¿æ’­ä¸¤ä¸ªæ•°ç»„éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š

1. å¦‚æœæ•°ç»„çš„ç§©ä¸åŒï¼Œåˆ™å°†ä½ç§©æ•°ç»„çš„å½¢çŠ¶æ·»åŠ 1sï¼Œç›´åˆ°ä¸¤ä¸ªå½¢çŠ¶çš„é•¿åº¦ç›¸åŒã€‚
2. å¦‚æœä¸¤ä¸ªæ•°ç»„çš„å°ºå¯¸ç›¸åŒï¼Œæˆ–è€…å…¶ä¸­ä¸€ä¸ªæ•°ç»„çš„å°ºå¯¸ä¸º1ï¼Œåˆ™ç§°è¿™ä¸¤ä¸ªæ•°ç»„åœ¨å°ºå¯¸ä¸Š*å…¼å®¹*ã€‚
3. å¦‚æœé˜µåˆ—åœ¨æ‰€æœ‰ç»´åº¦ä¸Šéƒ½å…¼å®¹ï¼Œåˆ™å¯ä»¥ä¸€èµ·å¹¿æ’­ã€‚
4. å¹¿æ’­åï¼Œæ¯ä¸ªæ•°ç»„çš„è¡Œä¸ºå°±å¥½åƒå®ƒä»¬çš„å½¢çŠ¶ç­‰äºä¸¤ä¸ªè¾“å…¥æ•°ç»„çš„å½¢çŠ¶çš„å…ƒç´ æœ€å¤§å€¼ä¸€æ ·ã€‚
5. åœ¨ä¸€ä¸ªæ•°ç»„çš„å¤§å°ä¸º1è€Œå¦ä¸€ä¸ªæ•°ç»„çš„å¤§å°å¤§äº1çš„ä»»ä½•ç»´åº¦ä¸­ï¼Œç¬¬ä¸€ä¸ªæ•°ç»„çš„è¡Œä¸ºå°±åƒæ˜¯æ²¿ç€è¯¥ç»´åº¦å¤åˆ¶çš„ä¸€æ ·

å¦‚æœè¯¥è¯´æ˜æ²¡æœ‰æ„ä¹‰ï¼Œè¯·å°è¯•é˜…è¯»[æ–‡æ¡£ä¸­](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)çš„è¯´æ˜ æˆ–[è¯¥è¯´æ˜](http://wiki.scipy.org/EricsBroadcastingDoc)ã€‚

æ”¯æŒå¹¿æ’­çš„åŠŸèƒ½ç§°ä¸º*é€šç”¨åŠŸèƒ½*ã€‚æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](http://docs.scipy.org/doc/numpy/reference/ufuncs.html#available-ufuncs)æ‰¾åˆ°æ‰€æœ‰é€šç”¨åŠŸèƒ½çš„åˆ—è¡¨ ã€‚

ä»¥ä¸‹æ˜¯å¹¿æ’­çš„ä¸€äº›åº”ç”¨ï¼š

```python
import numpy as np

# Compute outer product of vectors
v = np.array([1,2,3])  # v has shape (3,)
w = np.array([4,5])    # w has shape (2,)
# To compute an outer product, we first reshape v to be a column
# vector of shape (3, 1); we can then broadcast it against w to yield
# an output of shape (3, 2), which is the outer product of v and w:
# [[ 4  5]
#  [ 8 10]
#  [12 15]]
print(np.reshape(v, (3, 1)) * w)

# Add a vector to each row of a matrix
x = np.array([[1,2,3], [4,5,6]])
# x has shape (2, 3) and v has shape (3,) so they broadcast to (2, 3),
# giving the following matrix:
# [[2 4 6]
#  [5 7 9]]
print(x + v)

# Add a vector to each column of a matrix
# x has shape (2, 3) and w has shape (2,).
# If we transpose x then it has shape (3, 2) and can be broadcast
# against w to yield a result of shape (3, 2); transposing this result
# yields the final result of shape (2, 3) which is the matrix x with
# the vector w added to each column. Gives the following matrix:
# [[ 5  6  7]
#  [ 9 10 11]]
print((x.T + w).T)
# Another solution is to reshape w to be a column vector of shape (2, 1);
# we can then broadcast it directly against x to produce the same
# output.
print(x + np.reshape(w, (2, 1)))

# Multiply a matrix by a constant:
# x has shape (2, 3). Numpy treats scalars as arrays of shape ();
# these can be broadcast together to shape (2, 3), producing the
# following array:
# [[ 2  4  6]
#  [ 8 10 12]]
print(x * 2)

```

å¹¿æ’­é€šå¸¸ä¼šä½¿æ‚¨çš„ä»£ç æ›´ç®€æ´ï¼Œæ›´å¿«æ·ï¼Œå› æ­¤æ‚¨åº”åŠªåŠ›ä½¿ç”¨å®ƒã€‚

### å¤§é‡æ–‡ä»¶Numpy Documentation

è¿™ä¸ªç®€çŸ­çš„æ¦‚è¿°è§¦åŠäº†æ‚¨éœ€è¦äº†è§£çš„æœ‰å…³numpyçš„è®¸å¤šé‡è¦çŸ¥è¯†ï¼Œä½†è¿˜è¿œè¿œä¸å¤Ÿã€‚æŸ¥çœ‹ [numpyå‚è€ƒï¼Œ](http://docs.scipy.org/doc/numpy/reference/) ä»¥äº†è§£æœ‰å…³numpyçš„æ›´å¤šä¿¡æ¯ã€‚



## SciPy

Numpyæä¾›äº†é«˜æ€§èƒ½çš„å¤šç»´æ•°ç»„å’ŒåŸºæœ¬å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›æ•°ç»„è¿›è¡Œè®¡ç®—å’Œæ“ä½œã€‚ [SciPy](http://docs.scipy.org/doc/scipy/reference/) ä»¥æ­¤ä¸ºåŸºç¡€ï¼Œå¹¶æä¾›äº†åœ¨numpyæ•°ç»„ä¸Šè¿è¡Œçš„å¤§é‡åŠŸèƒ½ï¼Œå¯ç”¨äºä¸åŒç±»å‹çš„ç§‘å­¦å’Œå·¥ç¨‹åº”ç”¨ç¨‹åºã€‚

ç†Ÿæ‚‰SciPyçš„æœ€ä½³æ–¹æ³•æ˜¯ [æµè§ˆæ–‡æ¡£](http://docs.scipy.org/doc/scipy/reference/index.html)ã€‚æˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»SciPyçš„æŸäº›éƒ¨åˆ†ï¼Œè¿™äº›éƒ¨åˆ†å¯èƒ½å¯¹æœ¬è¯¾ç¨‹æœ‰ç”¨ã€‚



### å½±åƒæ“ä½œImage operations

SciPyæä¾›äº†ä¸€äº›å¤„ç†å›¾åƒçš„åŸºæœ¬åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå®ƒå…·æœ‰å°†ç£ç›˜ä¸­çš„å›¾åƒè¯»å–åˆ°numpyæ•°ç»„ï¼Œå°†numpyæ•°ç»„ä½œä¸ºå›¾åƒå†™å…¥ç£ç›˜ä»¥åŠè°ƒæ•´å›¾åƒå¤§å°çš„åŠŸèƒ½ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†è¿™äº›åŠŸèƒ½ï¼š

```python
from scipy.misc import imread, imsave, imresize

# Read an JPEG image into a numpy array
img = imread('assets/cat.jpg')
print(img.dtype, img.shape)  # Prints "uint8 (400, 248, 3)"

# We can tint the image by scaling each of the color channels
# by a different scalar constant. The image has shape (400, 248, 3);
# we multiply it by the array [1, 0.95, 0.9] of shape (3,);
# numpy broadcasting means that this leaves the red channel unchanged,
# and multiplies the green and blue channels by 0.95 and 0.9
# respectively.
img_tinted = img * [1, 0.95, 0.9]

# Resize the tinted image to be 300 by 300 pixels.
img_tinted = imresize(img_tinted, (300, 300))

# Write the tinted image back to disk
imsave('assets/cat_tinted.jpg', img_tinted)
```

![cat](/images/posts/ml/cat.jpg)

![cat](../images/posts/ml/cat.jpg) ![cat_tinted](../images/posts/ml/cat_tinted.jpg)

![cat_tinted](/images/posts/ml/cat_tinted.jpg)

å·¦ï¼šåŸå§‹å›¾åƒ(ç˜¦çŒ«)ã€‚å³ï¼šç€è‰²å’Œè°ƒæ•´å¤§å°çš„å›¾åƒï¼ˆè‚¥ğŸ±ï¼‰ã€‚



### MATLABæ–‡ä»¶

åŠŸèƒ½`scipy.io.loadmat`å’Œ`scipy.io.savemat`å…è®¸æ‚¨è¯»å–å’Œå†™å…¥MATLABæ–‡ä»¶ã€‚æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](http://docs.scipy.org/doc/scipy/reference/io.html)é˜…è¯»æœ‰å…³å®ƒä»¬ çš„ä¿¡æ¯ã€‚



### ç‚¹ä¹‹é—´çš„è·ç¦»

SciPyå®šä¹‰äº†ä¸€äº›æœ‰ç”¨çš„å‡½æ•°æ¥è®¡ç®—ç‚¹é›†ä¹‹é—´çš„è·ç¦»ã€‚

è¯¥å‡½æ•°`scipy.spatial.distance.pdist`è®¡ç®—ç»™å®šé›†ä¸­æ‰€æœ‰å¯¹ç‚¹ä¹‹é—´çš„è·ç¦»ï¼š

```python
import numpy as np
from scipy.spatial.distance import pdist, squareform

# Create the following array where each row is a point in 2D space:
# [[0 1]
#  [1 0]
#  [2 0]]
x = np.array([[0, 1], [1, 0], [2, 0]])
print(x)

# Compute the Euclidean distance between all rows of x.
# d[i, j] is the Euclidean distance between x[i, :] and x[j, :],
# and d is the following array:
# [[ 0.          1.41421356  2.23606798]
#  [ 1.41421356  0.          1.        ]
#  [ 2.23606798  1.          0.        ]]
d = squareform(pdist(x, 'euclidean'))
print(d)
```

æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html)é˜…è¯»æœ‰å…³æ­¤åŠŸèƒ½çš„æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ ã€‚

ç±»ä¼¼çš„å‡½æ•°ï¼ˆ`scipy.spatial.distance.cdist`ï¼‰è®¡ç®—ä¸¤ç»„ç‚¹ä¹‹é—´æ‰€æœ‰å¯¹ä¹‹é—´çš„è·ç¦»ï¼›æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html)é˜…è¯»æœ‰å…³ [å†…å®¹](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html)ã€‚



## Matplotlib

[Matplotlib](http://matplotlib.org/)æ˜¯ä¸€ä¸ªç»˜å›¾åº“ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œå°†ç®€è¦ä»‹ç»è¯¥`matplotlib.pyplot`æ¨¡å—ï¼Œè¯¥æ¨¡å—æä¾›äº†ç±»ä¼¼äºMATLABçš„ç»˜å›¾ç³»ç»Ÿã€‚



### ç»˜åˆ¶Plotting

matplotlibä¸­æœ€é‡è¦çš„åŠŸèƒ½æ˜¯`plot`ï¼Œå®ƒå…è®¸æ‚¨ç»˜åˆ¶2Dæ•°æ®ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š

```python
import numpy as np
import matplotlib.pyplot as plt

# Compute the x and y coordinates for points on a sine curve
x = np.arange(0, 3 * np.pi, 0.1)
y = np.sin(x)

# Plot the points using matplotlib
plt.plot(x, y)
plt.show()  # You must call plt.show() to make graphics appear.
```

è¿è¡Œæ­¤ä»£ç å°†ç”Ÿæˆä»¥ä¸‹å›¾ï¼š

![img](http://cs231n.github.io/assets/sine.png)

ä»…éœ€ä¸€ç‚¹ç‚¹é¢å¤–çš„å·¥ä½œï¼Œæˆ‘ä»¬å°±å¯ä»¥è½»æ¾åœ°ä¸€æ¬¡ç»˜åˆ¶å¤šæ¡çº¿ï¼Œå¹¶æ·»åŠ æ ‡é¢˜ï¼Œå›¾ä¾‹å’Œè½´æ ‡ç­¾ï¼š

```python
import numpy as np
import matplotlib.pyplot as plt

# Compute the x and y coordinates for points on sine and cosine curves
x = np.arange(0, 3 * np.pi, 0.1)
y_sin = np.sin(x)
y_cos = np.cos(x)

# Plot the points using matplotlib
plt.plot(x, y_sin)
plt.plot(x, y_cos)
plt.xlabel('x axis label')
plt.ylabel('y axis label')
plt.title('Sine and Cosine')
plt.legend(['Sine', 'Cosine'])
plt.show()
```

![img](http://cs231n.github.io/assets/sine_cosine.png)

æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.plot)é˜…è¯»æœ‰å…³è¯¥`plot`åŠŸèƒ½çš„ æ›´å¤šä¿¡æ¯ã€‚



### æ¬¡è¦æƒ…èŠ‚Subplots

æ‚¨å¯ä»¥ä½¿ç”¨`subplot`å‡½æ•°åœ¨åŒä¸€å›¾ä¸­ç»˜åˆ¶ä¸åŒçš„äº‹ç‰©ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š

```python
import numpy as np
import matplotlib.pyplot as plt

# Compute the x and y coordinates for points on sine and cosine curves
x = np.arange(0, 3 * np.pi, 0.1)
y_sin = np.sin(x)
y_cos = np.cos(x)

# Set up a subplot grid that has height 2 and width 1,
# and set the first such subplot as active.
plt.subplot(2, 1, 1)

# Make the first plot
plt.plot(x, y_sin)
plt.title('Sine')

# Set the second subplot as active, and make the second plot.
plt.subplot(2, 1, 2)
plt.plot(x, y_cos)
plt.title('Cosine')

# Show the figure.
plt.show()
```

![img](http://cs231n.github.io/assets/sine_cosine_subplot.png)

æ‚¨å¯ä»¥[åœ¨æ–‡æ¡£ä¸­](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.subplot)é˜…è¯»æœ‰å…³è¯¥`subplot`åŠŸèƒ½çš„ æ›´å¤šä¿¡æ¯ã€‚



### å›¾ç‰‡Images

æ‚¨å¯ä»¥ä½¿ç”¨è¯¥`imshow`åŠŸèƒ½æ˜¾ç¤ºå›¾åƒã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š

```python
import numpy as np
from scipy.misc import imread, imresize
import matplotlib.pyplot as plt

img = imread('assets/cat.jpg')
img_tinted = img * [1, 0.95, 0.9]

# Show the original image
plt.subplot(1, 2, 1)
plt.imshow(img)

# Show the tinted image
plt.subplot(1, 2, 2)

# A slight gotcha with imshow is that it might give strange results
# if presented with data that is not uint8. To work around this, we
# explicitly cast the image to uint8 before displaying it.
plt.imshow(np.uint8(img_tinted))
plt.show()
```

![img](http://cs231n.github.io/assets/cat_tinted_imshow.png)

## å‚è€ƒæ–‡æ¡£

````

CS231nç”¨äºè§†è§‰è¯†åˆ«çš„å·ç§¯ç¥ç»ç½‘ç»œ
http://cs231n.github.io/python-numpy-tutorial/

cs231n -karpathy@cs.stanford.edu
https://twitter.com/cs231n

cs231n
https://github.com/cs231n


cvè®¡ç®—æœºè§†è§‰ è§†é¢‘
https://www.bilibili.com/video/av32078165
````

