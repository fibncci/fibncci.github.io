---
layout: post
title: "PHP-Language"
date: 2019-07-23
tag: lang
---





php

```
用mac运行php文件

lang  
英[læŋ] 美[læŋ]
abbr. 语言（language）
```



## 终端运行php文件

```
➜  ~ git:(master) ✗ cd /Users/tianzi/Documents/php  找到一个文件夹

➜  php git:(master) ✗ php -S localhost:8000 然后就可以了5
PHP 7.1.23 Development Server started at Fri Jul 26 21:42:40 2019
这一步可以不做
➜  php git:(master) ✗ php 1.php
运行这个
bool(false)

➜  php git:(master) ✗ php gu.php
rot13:Guvf vf n grfg.
Upper:THIS IS A TEST.
Lower:this is a test.
Del1:This is a test.!!!!~~~~
Del2:<b>This is a test.</b>!!!!~~~~
Del3:<b>This is a test.</b>!!!!<h1>~~~~</h1>
```



**Mac配置php**

方法一：内置Web Server

```php
https://www.php.net/manual/zh/features.commandline.webserver.php


➜  ~ git:(master) ✗ jekyll server
Configuration file: none	配置文件:没有
需要build -建造
➜  ~ git:(master) ✗ sudo apachectl stop
➜  ~ git:(master) ✗ sudo launchctl unload -w 无
➜  ~ git:(master) ✗ brew install httpd 安装

➜  ~ git:(master) ✗ apachectl -v   
查看版本
Server version: Apache/2.4.34 (Unix)
Server built:   Feb 22 2019 20:20:11

➜  ~ git:(master) ✗ sudo launchctl unload -w 
Could not find specified service
无法找到指定的服务
➜  ~ git:(master) ✗ sudo apachectl sto

➜  ~ git:(master) ✗ php -v  
php版本
PHP 7.1.23 (cli) (built: Feb 22 2019 22:19:32) ( NTS )
Copyright (c) 1997-2018 The PHP Group

➜  ~ git:(master) ✗ ll  查看详细（zsh带的）
➜  php git:(master) ✗ php -S localhost:8000 然后就可以了5
PHP 7.1.23 Development Server started at Fri Jul 26 21:42:40 2019
这一步可以不做
           
```



**方法二：有软件带apache**

就是直接安装，Apache for mac V2.4.29 官方版



方法三：dom容器

就是一个虚拟机，配置环境而已



php**伪协议**

```
事实上是其支持的协议与封装协议

支持的种类有这12种
* file:// — 访问本地文件系统
* http:// — 访问 HTTP(s) 网址
* ftp:// — 访问 FTP(s) URLs
* php:// — 访问各个输入/输出流（I/O streams）
* zlib:// — 压缩流
* data:// — 数据（RFC 2397）
* glob:// — 查找匹配的文件路径模式
* phar:// — PHP 归档
* ssh2:// — Secure Shell 2
* rar:// — RAR
* ogg:// — 音频流
* expect:// — 处理交互式的流
```





## code

**gu.php**文件

```php
<?php
    $fp = fopen('php://output', 'w');
    stream_filter_append($fp, 'string.rot13');
    echo "rot13:";
    fwrite($fp, "This is a test.\n");
    fclose($fp);

    $fp = fopen('php://output', 'w');
    stream_filter_append($fp, 'string.toupper');
    echo "Upper:";
    fwrite($fp, "This is a test.\n");
    fclose($fp);

    $fp = fopen('php://output', 'w');
    stream_filter_append($fp, 'string.tolower');
    echo "Lower:";
    fwrite($fp, "This is a test.\n");
    fclose($fp);

    $fp = fopen('php://output', 'w');
    echo "Del1:";
    stream_filter_append($fp, 'string.strip_tags', STREAM_FILTER_WRITE);
    fwrite($fp, "<b>This is a test.</b>!!!!<h1>~~~~</h1>\n");
    fclose($fp);

    $fp = fopen('php://output', 'w');
    echo "Del2:";
    stream_filter_append($fp, 'string.strip_tags', STREAM_FILTER_WRITE, "<b>");
    fwrite($fp, "<b>This is a test.</b>!!!!<h1>~~~~</h1>\n");
    fclose($fp);

    $fp = fopen('php://output', 'w');
    stream_filter_append($fp, 'string.strip_tags', STREAM_FILTER_WRITE, array('b','h1'));
    echo "Del3:";
    fwrite($fp, "<b>This is a test.</b>!!!!<h1>~~~~</h1>\n");
    fclose($fp);
?>

<!-- 
过滤器

过滤器有很多种，有字符串过滤器、转换过滤器、压缩过滤器、加密过滤器
字符串过滤器


    string.rot13

    进行rot13转换
    string.toupper
    将字符全部大写
    string.tolower
    将字符全部小写
    string.strip_tags
    去除空字符、HTML 和 PHP 标记后的结果
    着重介绍一下这个，功能类似于strip_tags()函数，若不想某些字符不被消除，后面跟上字符，可利用字符串或是数组两种方式
 -->
```



**1.php**文件

```php
//青蛙过河-php
//A11 + A12+A33 +A44
//数列占位符 —标记。
//二进制-1，穷举法 （排列组合）笛卡尔乘积
//0 1 2 3  4 5 6 8 12 100（trash）

  
<?php 
    function cross($arr){
        // 输入数据基本的判断
        if ( !is_array($arr) ) {
            return false;
        }

        $length=count($arr);
        if ($length<=1) {
            return false;
        }

        // 判断第1,2位的数值情况
        if ( ($arr[0]!=0) || ($arr[1]!=1) ) {
            return false;
        }

        if ($length==2) {
            return true;
        }

        // 长度为3时的判断
        if ($length==3) {
            if ( ($arr[2]==2) || ($arr[2]==3) ) {
                return true;
            }else{
                return false;
            }
        }

        // 保证数组元素皆为整型
        for ($i=0; $i < $length; $i++) { 
            if ( !is_int($arr[$i]) ) {
                return false;
            }
        }

        // 子数组的最大长度
        $len=$length-3;
        $arr1=array_slice($arr, 2, $len);

        // 子数组生成的初始方式
        $markStr=str_repeat(1, $len);

        // 生成初始子数组
        $arr2=newArr($arr,$arr1,$markStr);

        // 进行判断检测
        $res=examine($arr,$arr1,$arr2,$len,$markStr);

        return $res;
    }

    // 生成子数组
    function newArr($arr,$arr1,$markStr){
        $arr2=[];
        for ($i=0; $i < strlen($markStr); $i++) { 
            if ( $markStr[$i]==1 ) {
                array_push($arr2, $arr1[$i]);
            }
        }
        // 完善数组
        array_unshift($arr2,$arr[0],$arr[1]);
        array_push( $arr2,end($arr) );

        return $arr2;
    }

    function examine($arr,$arr1,$arr2,$len,$markStr,$times=1){
        // 所有可能的子数组的总数量
        $totalTimes=pow(2,$len);
        // var_dump($arr2);

        // 遍历子数组
        for ($i=1; $i < count($arr2)-1 ; $i++) { 
            // 计算元素分别与前后元素的差值
            $k1=$arr2[$i]-$arr2[$i-1];
            $k2=$arr2[$i+1]-$arr2[$i];

            // 进行差值判断
            if ( abs($k1-$k2)>1 ) {
                // 累计次数
                $times++;
                // 次数判断
                if ($times>$totalTimes) {
                    return false;
                }

                // 子数组生成方式的数据类型转换
                $markNum=toBinary($markStr);
                
                $markNum=decbin(--$markNum);
                $markStr=strval($markNum);
                $markStr=str_pad('0',$len, $markStr );

                // 生成新的子数组
                $arr2=newArr($arr,$arr1,$markStr);

                // 再次进行判断
                $res=examine($arr,$arr1,$arr2,$len,$markStr,$times);

                return $res;
            }
        }

        return $arr2;
    }

    function toBinary($str){
        $num=0;
        for ($i=0; $i < strlen($str); $i++) { 
            if ( $str[$i]==1 ) {
                $num+=pow(2,strlen($str)-1-$i);
            }
        }

        return $num;
    }

    var_dump( cross([0,1,2,3,5,6,8,12,16]) );

    // * 将字符串转换成二进制
    // * @param type $str
    // * @return type
    // */
    // function StrToBin($str){
    //     //1.列出每个字符
    //     $arr = preg_split('/(?<!^)(?!$)/u', $str);
    //     //2.unpack字符
    //     foreach($arr as &$v){
    //         $temp = unpack('H*', $v);
    //         $v = base_convert($temp[1], 16, 2);
    //         unset($temp);
    //     }

    //     return join(' ',$arr);
    // }



 ?>



```

