---
layout: post
title: "matlab语言"
date: 2019-07-22
tag: lang
---







## 笔记



花费大概一周的业余时间完成MATLAB的基本语法的学习，数据处理和图形绘制的基本应用，会用MATLAB解决实际问题



**Chapter 1：初识MATLAB**

• PLOTS（绘图功能）可绘制大量函数图形、统计图形
• 换行不执行在【shift＋enter】实现(在命令行中)
• Choose->column可添加监视最大值最小值
• 在MATLAB语言中，注释用“%”来进行行注释        多行同时注释时应先选中，在ctrl+R，取消为ctrl+T
• 常用命令操作     ans 答案              clc 清楚命令行       clear  清除变量      
                            disp显示矩阵/文本                      exit/qui退  出matlab



**Chapter 2:MATLAB中的变量、数据的显示格式和特殊字符** 
2.1 变量 
变量的命名规则：字母开头，大小写区分，无需声明； 
变量有四种类型：double，char，sym，struct； 
某些变量被自动赋值，称之为固有变量

例:X1=1/3;X2=”1/3” 
X3=sym(‘1/3’);X4.a=1/3;

例: i/j 虚数单位； Inf 无穷大 
NaN 非数 ；ans 当前答案

2.2 数据的显示格式 
是可以通过键入 format +… 来改变显示格式

Short/long 5/15位固定点格式 
Short/long e 5/15浮点格式 
Short/long eng 5/15工程格式

2.3 特殊含义的符号

” , ” 换行并显示结果、在矩阵中是分隔符 
” ；”换行不显示结果、在矩阵中做换行符 
” ’ “单引号表示对矩阵做转置运算

**Chapter 3:矩阵的操作**

3.1 矩阵的输入和生成 
键入help elmat可以查看此种命令

                     在命令行中直接键入；键入例：A=[1 1  1;2  2  2;3  3  3] ；

直接输入 
利用矩阵编辑器输入矩阵； 键入例：键入B=1，双击B，在数组编辑器中编辑数组；

由外部文件导入，支持excal和txt格式的文件导入

                                             X=first:increment:last          从first开始，以increment为步长，到last为止创建数组；increment不写默认为1
                                  X=linspace(a,b,n)                从a到b，创立由n个等间隔的数构成的数组
                                  X=logspace(a,b,n)               从10a     到10b     n个数                            

Matlab函数创建 键入helb（n）可创建n阶helbert矩阵，求逆时需要专门的函数 
键入rand（m，n）创建m*n阶的随机数矩阵 
zeros（m，n） 创建m*n阶的零矩阵 
ones（m，n） 创建m*n阶的元素全为矩阵1的矩阵 
eyes （m，n） 创立m*n阶的辨识矩阵，主对角元素全为1，其余元素全为0

3.2矩阵结构的变换

• diag（）
       diag（v）是生成矩阵V的主对角线元素所构成的列向量
       diag（v，k）表示生成矩阵V的第k条对角线元素所构成的列向量。k>0表示在主对角线的上方；k<0表示在主对角线的下方
           若v为n维向量，则diag（v）表示生成以v为对角线的n阶方阵，diag（v，k）生成n+k阶方阵，且v为此方阵的第k条对角线

• blkdiag
   主对角元素为子矩阵的对角矩阵
    例：A=[1 2;3 4];B=[5,6]       blkdiag(A,B)
      ans=[1  2  3;   3   4  0; 0  0  5;0  0  6]

• tril
       提取主对角线下方的下三角矩阵。调用方法tril（A,k）。k=0，表示调取下三角矩阵；k>0表示调取主对角线上方第k条对角线下方的                           
       元素；k<0表示提取主对角线下方第k条线下方的所有元素
• triu
     提取上三角矩阵，用法和tril完全一样；

• 删除替换
    寻址：A（x，y）第x行，第y列元素，行优先原则，下标计数从1开始
    矩阵的标识A（i，j）标识第i行，第j列的元素 ；A（i，：）标识第i行元素；A（i，[2,3]）标识第i行第2、3个元素
              例：A为一个3*4的矩阵，实现如下操作：B=A（[1,3]，：）删除了第二行元素；D=A（：，[2,1,4,3]）将12列交换，34列  交换
    空矩阵X=[ ]。标志矩阵M不含任何元素，空矩阵不是0，也不是不存在。
              例：A（m，：）=[ ] 删除第m行；
    拼接矩阵，拼接矩阵需满足线性代数的子矩阵划分理论。

```
  例：a11=[1 2]   a12=[3]   a13=[4  5  6]     a21=[7  8;13  14]    a22=[9;15]   a23=[10   11   12;16  17   18]      
  A=[a11   a12   a13;a21  a22   a23]        ans=[1  2  3  4  5  6  7；8  9  10  11  12；13  14  15  16  17  18]      


```





**Chapter 4:矩阵的基本运算**

4.1 矩阵的加、减、乘运算

• Matlab中矩阵的加法、减法、乘法运算与线性代数的定义是一致的。
• 在乘法运算中，二者的行列书必须要是匹配的，否则会报错。
• 在加减法运算中，有一种特殊情况，当其中一个矩阵退化成一个数时，重新定义结果为矩阵的每一个元素加减此数。

4.2 矩阵的点乘运算 
这是Matlab新定义的运算，符号为”.*”.运算法则为两同阶矩阵的同位元素相乘。用于多项式相乘的结果矩阵

4.3 矩阵的除法运算 
Matlab重新定义的运算，有左除”\”和右除”/”两种； 
求逆矩阵法，用inv（）函数 无论是从计算精度还是计算时间上，除法的效率比求逆高 
解方程AX=b 当A不是方阵但却是奇异矩阵时，依然可以尝试除法来求解 
也可利用伪逆函数pinv（）来计算 
用除法直接求。 如果方程组的解不唯一，除法给出的仅仅是一个特解，范数最小且含有尽可能多的0.

4.4 矩阵的点除运算 
Matlab重新定义了一种除法运算，符号为”./”或者”.\”.运算法则为两同阶矩阵的同位元素相除。用于多项式相除的结果矩阵。某一矩阵 
退化为数有可能可以进行运算。

4.5 矩阵的乘方运算 
A^p代表A的p次方，若p为正数，则为该矩阵自乘p次；若p为负数，则结果为该矩阵的逆自乘p次。若p为0，则结果为与n同阶的单位矩阵。 
A.^p代表A的各元素自己的p次方所形成的的新矩阵。

**Chapter 5 :Matlab的函数命令** 
5.1 基本函数 
在命令行键入”help elfun”可查到所有基本函数 
这些函数都是定义在负数域上的，值域也是复数域，只有函数realpow( )、reallog( )、realsqrt( )才是定义在实数域上的。 
如输入函数参量是矩阵，输出为同阶矩阵，每个元素为原矩阵对于元素进行相应操作所得到的数。（便于进行批量处理）

**5.2 数据分析（Data Analysis）函数** 
在命令行键入”help datafun”可查到所有数据分析函数。 
一般来说，输入向量应该是列向量；如果输入行向量，也能计算；输入矩阵则按列向量计算。

**5.3 矩阵函数（Matrix Function）** 
在命令行键入”help matfun”可查到所有数据分析函数，再用help+函数名的方法可以查到具体用法。

• 关于矩阵分析的命令（Matrix Analysis） 
rank（）求矩阵的秩 det（）求矩阵的行列式 trace（）求迹，主对角线元素之和 rref（）进行初等行变换，变化成阶梯矩阵 
• 关于解线性方程组的命令（Liner Equations） 
inv（）求矩阵的逆 pinv( )求矩阵的伪逆 
• 关于求特征值和奇异值的命令（Eigenvalus and Singular Values） 
eig（）求矩阵的特征值和特征向量 。调用时E=eig（A）E为A的特征值构成的向量；[V，D] D是以A的特征值为主对角线元素的 
对角矩阵，V是与特征值相对应的特征向量所构成的满秩矩阵 

**Chapter 6 :Matlab的绘图** 
6.1 平面函数的绘制 
在x-y平面下画函数图像利用plot（）函数，调用格式plot（x1,y1,x2,y2,……）两个一对。 
• 曲线的修饰 
plot（x1，y1，s1…，‘LineWidth’，a） S代表各种字符，可以调节颜色和节点组合，‘LineWidth’，a（数字）用来调节曲线宽度 
• 坐标轴的控制 
axis（[xmin,xmax,ymin,ymax]）指定坐标轴的显示范围 asix equal使坐标轴单位长度相等 asix square 使坐标轴为正方形 
• 图形标注，图形说明，网格 
（1）图形说明命令 
title（‘ S’）题头标注 xlabel（‘S’）x轴标注 ylabel（‘S’）y轴标注 
（2）图形说明命令 
legend（‘S1’，‘S2’，pos） 线型说明，用来为曲线备注 pos设置标注位置 
（3）网格 
grid on 在坐标上画网格 grid 在坐标上去除网格 grid在上面两个切换 
6.2 空间图形的绘制 
（1）空间曲面的绘制 
一般的，，对于矩形区域D,可分别求出n维向量x和m维向量y，再用命令[X,Y]=meshgrid(x,y),求得矩形区域横纵交点的横纵坐标的矩阵 
X和Y。最后再用mesh（X,Y，f（X,Y））来画出图形。Meshc（）可画出带有等高线的图形。 
（2）绘制空间曲线的命令是plot3调用格式为plot3（x,y,z）用法与plot完全一样



**参考书籍:** 

• 理论教程 《MATLAB与计算方法》 谢进，李大美主编 武汉大学出版社 图书馆编号TP312MAX321 
• 实践教程 《MATLAB基础与运用》 熊庆如主编 机械工业出版社 图书馆编号TP321MAX418





## 整理笔记

本文主要记录一些学习Matlab过程中的一些琐碎的易忘的知识点，以待日后翻阅查看。快捷键指令`cmd+k` 清除指令界面`quit` 退出matlab`whos` 可以查询迄今为止所有定义的变量的类型、内存空间、是否复数,`who`只查看变量名称`clear` 清除全部变量，`clear x y z`清除制定变量`...` 用来续行`format short/long` 结果精确到4位小数或者16位小数，`format short e`用科学计数法计数，`format rat` 查找最近结果的比例式`%` 注释标记数学运算符`pi` 相当于派`abs`求绝对值`exp(a)` 求解e的a次方`sqrt(a)` 对a开根号`log(a)` 求a的自然对数ln(a)，`log10(a)` 求10为底的a的对数`sin` `cos` `tan` `atan` 三角函数随便用`a/b`是右除，意思是a➗b`a\b`是左除，意思是b➗a运算顺序：幂运算优于乘除，右除优于左除在赋值语句后面加 `;` 可以只起到赋值的效果，不输出 `x=20` 的赋值结果（不显示在命令窗口）`2 +3i` 表示复数就可以用i`.^`幂次方运算需要在`^`之前加`.``pretty(f)`用书面方式显示方程f易错点看清是直径还是半径当重新定义了自变量x，需要重新运行`y=f(x)`，从而获取新的y值，否则会有矢量大小不匹配的错误`axis([-4,4,-2,2])`别忘了最外面的括号得到一个大矩阵：`[x, y] = meshgrid(-3:0.1:2, -5:0.1:5)[x, y] = meshgrid(-5:0.2:5)`![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_1_20171115064010915.png)矩阵求模：`sqrt(dot(A,A))`当出现`error`的时候，先看看有没有定义变量，`syms x``.*`和`dot`是不同的运算，`dot`得出来的结果是两个矩阵对应元素相乘后加起来，因此得到一个数字，`.*`没有加起来，因此得出来的是一个矩阵`syms`定义多个变量的时候不需要加`，`如果极限不存在,为NAN，那么再计算一下左右极限来进一步确定一下渐近线需要先求解出来，再用`plot([3,3],[-10 10],'r--')`画出来，注意中间的定义域和值域的首尾之间没有`，`dsolve里面不能传入连等的条件,`Dx=x(0)=0`这种结果是错误的。积分的时候`int(f)`中的f不需要加引号线性代数基础补充一点线性代数的基础知识：向量：`u=(u1,u2,u3) v=(v1,v2,v3)`单纯行乘列的矩阵乘法公式: `u * v'={u1v1+u2v2+u3v3}`叉积公式：`cross(u,v)=u x v = {u2v3-v2u3, u3v1-v3u1, u1v2-u2v1}`点积公式：`sum(dot(u,v))=sum(u .* v) = u1v1+u2v2+u3v33=|u|*|v|*COS(U,V)`**叉乘（向量积）**的意义就是通过两个向量来确定一个新的向量，该向量与前两个向量都垂直**点乘（数量积）**的结果就是两个向量的模相乘，然后再与这两个向量的夹角的余弦值相乘。或者说是两个向量的各个分量分别相乘的结果的和。很明显，点乘的结果就是一个数，这个数对我们分析这两个向量的特点很有帮助。如果点乘的结果为0，那么这两个向量互相垂直；如果结果大于0，那么这两个向量的夹角小于90度；如果结果小于0，那么这两个向量的夹角大于90度。行向量 `a=[1,2,3] a=[1 2 3]`, 列向量 `b=[1;2;3]`引用向量的个别“单行单列”元素`a(1),a(4:6),a(:)`第三个是显示a向量所有的元素引用向量的个别“多行多列”元素`a(2,3) a(:,2) a(:,2:3) a(1:2,2:3)`第二行第三列，第二列，第二列和第三列，一二行二三列，`a(1,:)=[]`,删除第一行复制行创建新矩阵`a([1,2,1],:)`，复制一行放在一行，复制二行放在二行，复制一行放在三行转置运算用 `'` ，加减乘除直接算向量合并，行向量用`,`合并，列向量用`;`合并`a=[0:2:10]`创建从0到10间隔2的等差行向量`a=logspace(0,1,5)`创建从10^0到10^1之间含有5个等差元素的点，注意是圆括号（）`length(a),max(a),min(a)`分别求解出- 矩阵的个数，最大值，最小值求模（繁琐版）对于实数 `sqrt(sum(a.*a))` 对于复数`sqrt(sum(a.*conj(a)))` ，`conj(a)`是求复数的共轭复数`dot(a,b) cross(a,b)`点乘（对应元素相乘并求和）和叉乘当a是带有复数的矩阵，`'`是转置加共轭，而`.'`是单纯的转置`.*`是对应位置元素相乘（行乘行），`*`是矩阵相乘（行乘列）`./``.\``.^`分别是右除，左除和幂次方，换句话说只要是加`.`基本都是对应位置元素互相运算`zeros(m),zeros(m,n) eye(m),eye(m,n)`分别是零矩阵和单位矩阵`det(a)`求矩阵a的行列式，助力求解多元一次方程的解`rank(a)`求矩阵a的秩`inv(a)`求矩阵a的逆矩阵，`det(a) != 0`的矩阵a才有逆矩阵`rref(A)`求A降行后的梯形矩阵`magic(n)` 魔方矩阵(幻方)是一个 n×n 矩阵。矩阵的元素从 1 到 n^2 之间,并且行元素的和等于列元素的和。`[L, U] = lu(A)` 对矩阵 A 进行 LU 分解，`x = U\(L\b)`用来求方程组的解求方程的解普通方法：![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_2_20171115064014150.png)增广矩阵：![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_3_20171115064014962.png)![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_4_20171115064016212.png)逆矩阵：![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_5_20171115064016822.png)线伪逆矩阵求无限解det(a)=0：![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_6_20171115064017712.png)LU分解：![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_7_20171115064018712.png)绘制图像`x=[0:0.1:10]; y=cos(x); plot(x,y),xlabel('x'),ylabel('cos(x)'),gird on,axis equal,legend('cos(x)');`绘制图像+加坐标轴标签+网格+坐标轴间隔相同+图例，当更新x的区间或者间隔的时候，需要重新调用`y=cosx`来更新y值，否则会报错`fplot('exp(-2*t)*sin(t)',[0, 4]), xlabel('t'), ylabel('f(t)'), title('阻尼弹力')`fplot自动计算间隔，画出平滑的曲线`axis ( [xmin xmax ymin ymax] )`确定绘图的x轴和y轴的绘图范围，`axis auto`让matlab自动确定x轴和y轴的间距输入图例或者坐标轴名称的时候务必注意输入`''`，不要输入变量作为参数`t = [0:0.02:4];f = exp(-2*t)*sin(t);??? Error using ==> mtimesInner matrix dimensions must agree.`当一个函数是由二个或更多个函数相乘构成,别忘记在相乘时加上“.”以便告诉 MATLAB 我们是对两个矩阵进行相乘。应改为`t = [0:0.02:4];f = exp(-2*t).*sin(t);`同时画两条曲线，`plot(t,f,'-',t,g,'--')`实线’-‘虚线’—‘虚点线’-.’点线 ‘:’同时画两条实线，并且确定两条实现的颜色和虚实`plot(x,y,'r',x,z,'b--')`画平行于坐标轴的直线 `plot([0,0],[-1,2],'--')`不可以用`plot(0,[-1,2],'--')`对方程画图`%ezplot里面的参数需要加''ezplot('x^2 - 6*x - 12')d = 'x^2 - 6*x - 12';ezplot(d);%限定图像定义域ezplot(d,[x1,x2]);%限定图像的定义域和值域ezplot('x+3', [-4, 4, -2, 2])%错误，ezplot里面没有等号ezplot('x+3=0')%正确ezplot('x+3')`MATLAB 颜色说明符颜色key黑色k白色w红色r黄色y绿色g蓝色b青色c洋红m绘制子图使用命令 `subplot(m, n, p)`,这里 m 和 n 告诉 MATLAB 产生的产生的子图有 m 行和 n 列,p 用来告诉 MATLAB 我们所要贴上去的 某个已经绘制的图形窗口在第几个块中，记住，要先subplot开辟空白表，再在plot画上图像产生x数集的命令：
`x = linspace(a,b)`:MATLAB 会在 a 到 b 间取出均匀分布的 100 个点(或行向量),如果写成`x = linspace(a,b,n)`:那么 MATLAB 会在 a、b 之间取出均匀分布的 n 个点。在两条`plot`命令之间加`hold on`可以使得两个图像重叠，而不必清除原有重新绘制将图像上特定的点用红色圆圈圈起来`plot(double(s(1)),double(subs(f,s(1))),'ro')`绘制极坐标曲线：`theta = [0:pi/90:2*pi];r = a*theta;polar(theta,r), title('阿基米德螺线');`绘制双log曲线：`loglog(x,y)`,它产生的图像x，y轴均使用对数值`semilogx(x, y)`,它产生的图象 x 轴使用对数值, y 轴仍然用直接值;相应地,`semilogy(x, y)`产生的图象 y 轴使用对数值,x 使用直接值。绘制离散图（折线图）`months=['J';'F';'M';'A';'M';'J';'J';'A';'S';'O';'N';'D'];N=20; x=(1:N); y=ceil(12*rand(N,1)); plot(x,y); set(gca,'YLim',[0 13],'YTick',1:12,'YTickLabel',months)`![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_8_20171115064019275.png)`YLim` 限制纵坐标的总范围0~13`YTick` 月份对应点在总范围中的部分1~12`YTickLabel` 纵轴的文字标定值绘制离散图（柱状图）`x = [1:5];y = [50,98,75,80,98];bar(x,y), xlabel('学生'),ylabel('分数'), title('期末测试')%水平的柱状图barh(a,b),xlabel('学生人数'),ylabel('考试分数')%三维柱状图bar3(a,b),xlabel('考试分数'),ylabel('学生人数')`![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_9_20171115064019853.png)`%默认是非分组的柱状图bar(x, y, grouped);%设置分组柱状图bar(x, y, stacked);x = [54.5,64.5,74.5,84.5,94.5];garcia= [0; 3; 18; 13; 10];simpson= [3; 5; 20; 10; 5];smith= [1; 2; 15; 17; 8];y = [garcia simpson smith];bar(x,y),xlabel('考试分数'),ylabel('学生人数'),legend('加西亚','辛普森','史密斯')`![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_10_20171115064021290.png)绘制离散图（针头图）`plot(t,f),xlabel('时间(秒)'),ylabel('弹簧响应')%替换为：stem(t,f),xlabel('时间(秒)'),ylabel('弹簧响应')%填充绿色菱形标记：stem(t,f,'--dg','fill'),xlabel('时间(秒)'),ylabel('弹簧响应')`![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_11_20171115064021869.png)
![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_12_20171115064024181.png)等高线图(二维+三维)`[x,y] = meshgrid(-5:0.1:5, -3:0.1:3);%[x,y] = meshgrid(-2:0.1:2);如果两个变量的取值范围相同，可以只写一次z = x.^2 + y.^2;[C,h] = contour(x,y,z);%c是等高线矩阵，h是等高线句柄%给等高线加上图例set(h,'ShowText','on','TextStep',get(h,'LevelStep')*2)%变成三维图像,30指的是等高线的密度contour3(x, y, z, 30)；%装扮图像surface(x,y,z,'EdgeColor',[.8 .8 .8],'FaceColor','none')grid off；view(-15,20)；%摄像机沿着x，y轴移动`解释set指令的参数：`contour(x,y.z)`：（x，y）是平面z=0上点的坐标矩阵，z为相应点的高度值矩阵。`[C,h]=contour(x,y,z)`：C 为返回等值线矩阵，h为图形对象的句柄向量，也就是代表所绘制图形；`set(h,'ShowText','on','TextStep',get(h,'LevelStep')*2)`
h：图形对象；`ShowText`：显示等高值标签命令，后面设置’on’，就是打开显示标签；`TextStep`：标签的步长；`LevelStep`：等高线步长；`get(h,'LevelStep')`：得到等高线步长的值。这个命令就是从第一个等高线开始，*每隔一个*给等高线贴上标签。三维图像`%绘制圆柱体t = 0:pi/10:2*pi;[X,Y,Z] = cylinder(1+sin(t));surf(X,Y,Z);axis square;%普通三维图像mesh(x,y,z),xlabel('x'),ylabel('y'),zlabel('z')%表面颜色过渡的图像surf(x,y,z),xlabel('x'),ylabel('y'),zlabel('z')%底部有等高线映射的图像surc(x,y,z),xlabel('x'),ylabel('y'),zlabel('z')%图象中的阴影可以设置为flat、interp和faceted。%flat 是用同一颜色为每个网格进行着色并隐藏网格线%而 facted 则显示网格%使用 interp 是 告诉 MATLAB 使用颜色插值的办法进行着色,因此显得非常平滑surfl(x,y,z),xlabel('x'),ylabel('y'),zlabel('z');shading interp;%将图像着色为灰色colormap(gray);``mean(a)`行向量可以求得每一个行元素的平均值，`mean(A)`矩阵可以求得每一列的平均值`median(raw)`中位数`std(raw)`标准差`size(A)`判断矩阵的大小`~=`是不等于`disp('错误:数据必须具有相同的维数。')`自定义错误出现时，屏幕上显示的语句逻辑控制if_else判断`myaverage.m`文件的内容（文件名与函数名务必相同，否则无法调用)`function ave = myaverage(x,N)	sizex = size(x);	sizeN = size(N);	if sizex(2) ~= sizeN(2)		disp('错误:数据必须具有相同的维数。')	else		total = sum(N);	s = x.*N;	ave = sum(s)/total;	endend`for循环`for index = start : increment : finish	statements
end`input输入`r = input('输入半径:')`while循环`while condition	statements
end`switch_case语句`switch expression	case 1		do these statements	case 2		do these statements	case n		do these statements	end`解方程一元一次方程`%'a'的意义是标定未知量，这样剩下的一个字母被认为是常量%solve('a*x + 5=0','a')和solve('a*x + 5','a')是一样的，=0是默认值solve('a*x + 5','a')MATLAB 响应输出为:ans =	-5/x`一元二次方程`s = solve('x^2 - 6*x - 12 = 0')s=	3 + 21^(1/2) 	3 - 21^(1/2)%这两个值可以用s(1),s(2)取到d = 'x^2 + 9*x -7 = 0';solve(d);%强制转换格式，可以将多项式转化为小数x = double(s(1))`二元一次方程组`s = solve('5*x + 4*y = 3','x - 6*y = 2');%使用点句号“.” 我们就可以取得相应的 x 和 y 值s.xs.y`方程的展开(多个多项式相乘)`%定义变量xsyms x
expand((x - 1)*(x + 4))`方程的合并和化简（分配多项式）`collect(x*(x^2 - 2))%经测试，可以被expand代替`因式分解`factor(112)%分解数字factor(x^2 - y^2)factor([x^2-y^2, x^3+y^3])%多个因式同时分解`多项式相除`%多项式相除syms x;simplify((x^4-81)/(x^2-9))ans =	x^2+9%log函数化简syms x;simplify(exp(2*log(3*x)))ans =	9*x^2%三角恒等式syms x;simplify(cos(x)^2-sin(x)^2)ans =	2*cos(x)^2-1simplify(cos(x)^2+sin(x)^2)ans =	1`使用指数和对数函数求解方程`eq = 'log10(x) - log10(x - 3) = 1';s = solve(eq);`泰勒级数展开式`taylor(sin(x),'order',20)//20为展开的项数`极限计算独立变量趋近于0`%limit(f)limit((x^3 + 1)/(x^4 + 2))`独立变量趋近于非0`%limit(f, a)limit(x + 5,3)`独立变量趋近于无穷大(小)`%limit(f,inf)%limit(f,-inf)limit(sqrt(x^2+x)-x,inf)`左极限和右极限`a = limit(f,x,3,'left')b = limit(f,x,3,'right')`求导数`%一阶导数diff(f)%n阶导数diff(f,n)`检查等式两边的式子是否相等`isequal(a,f)`将常数代入方程得到结果`subs(h,2)%将多个常数代入求得方程的结果subs(F,{b,x},{2,4})`求解符号微分方程![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_13_20171115064024744.png)`%dsolve('eqn', 'cond1', 'cond2', ...),cond1等是初始条件dsolve('Dy = y*t/(t-5)','y(0) = 2')dsolve('D2y - y = 0','y(0) = -1','Dy(0) = 2')`常微分方程(ODE)求解`s = dsolve('Dy=a*y')s =	C1*exp(a*t)C1 = 2; a = 4;%将常数代入字母为系数的方程f = subs(s)f=	2*exp(4*t)%或者f = subs(s,'C1',2);`方程组和相平面图![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_14_20171115064025837.png)设置曲线图像细节`%调用 findobj 命令告诉 MATLAB 查找图象中的线条,然后使用 set 命令为线条设置颜色(最后所有的line都变为红色)ezplot(s.X),set(findobj('Type','line'),'Color','r')%调用 get 命令,它将返回当前图形对象的句柄h=get(gca,'children');%使用下面的命令改变它（单独的一条line变为虚线）set(h(1),'linestyle','--')`常微分方程（ODE）的数值解使用ODE23和ODE45求解一阶方程我们创建一个.m文件,输入下面的内容。`function ydot = eq1(t,y)ydot = cos(t);`通过调用ODE32/ODE45函数来求解ODE(产生的是t和对应的y的数组元素)`%[t,y] = ode23('func_name', [start_time, end_time], y(0))[t,y] = ode23('eq1',[0 2*pi],2);%[t,y] = ode45('func_name', [start_time, end_time], y(0))[t,w] = ode45('eq1',[0 2*pi],2)`首先我们产生一个表示解析解的数集,然后我们可以比较:`f = 2 + sin(t);`使用下面的命令来产生图象:`plot(t,y,'o',t,f),xlabel('t'),ylabel('y(t)'),axis([0 2*pi 0 4])plot(t,w,'o',t,f),xlabel('t'),ylabel('y(t)'),axis([0 2*pi 0 4])`ODE23![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_15_2017111506402856.png)ODE45![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_16_20171115064028681.png)ODE23与ODE45区别：如果误差对你非常重要,那么使用ode45将是明智的选择，ODE45误差小根据数值画出的点比前面我们从ode32得到的密度要高带有扰动的常微分方程![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_17_20171115064029244.png)`function ydot = eq2(t,y)	global tc w	F = t*exp(-t/tc)*cos(w*t);	ydot = 5*(F-y);``tc = 0.1; w = 6.28;final_time = 1.0;[t,y] = ode45('eq2',[0 final_time],y0);plot(t,y),xlabel('t'),ylabel('y(t)'),axis([0 0.7 0 0.015])plot(t,y,t,F,'--'),xlabel('t'),ylabel('y(t)'),axis([0 0.7 0 0.05])`二阶方程求解![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_18_20171115064030306.png)`function xdot = eqx(t,x);%创建数组储存数据xdot = zeros(2,1);xdot(1) = -x(1)^2 + x(2);xdot(2) = -x(1) - x(1)* x(2);[t,x] = ode45('eqx',[0 10],[0,1]);plot(t,x(:,1),t,x(:,2),'--'),xlabel('t'), axis([0 10 -1.12 1.12])`二阶方程求解需要把这个方程换成一阶方程组![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_19_20171115064058603.png)积分计算INT命令`%int(f)%int(f, v) 语法来调用 int,其中 f 就是要积分的函数,而 v 是积分变量syms x;int(x)`**对于计算积分的读者来说,不要忘记在你的答案后面带上积分常量**定积分![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_20_2017111506410056.png)`int('x',2,3)`or`F = int(x);subs(F,x,3)-subs(F,x,2)`多重积分![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_21_20171115064100634.png)`int(int(int(x*y^2*z^5,x),y),z)`![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_22_20171115064101603.png)`int(int(f,x,2,4),y,1,2)`数值积分调用 trapz(x, y)函数 MATLAB 可以进行梯形积分![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_23_20171115064102119.png)`%等分次数越多，误差越小x = linspace(0,2,10);y = x.^2;a = trapz(x,y);a=	2.6831`正交积分MATLAB 有两个命令 quad 和 quad1 可以用来实现正交积分。这种类型的方法基于使用 二次函数代替矩形更能接近曲线下方面积的原理(使用高阶的多项式还能够得到更精确的结 果)。辛普森法则(Simpson’s rule)是把积分区间分成偶数段,相邻两段下面的面积用不同 的二次函数近似表示。quad 函数采用适应辛普森法则的逼近方法进行数值积分。要使用 quad,把被积的函数传递给它,后面跟着积分区间。
quadl 函数采用洛巴托(Lobatto)积分法。这是一种适应正交积分更加灵活复杂的类型, 查阅 MATLAB 的帮助以便获得更多的信息。quad 和 quadl 函数的不利方面是无法对点集进行积分。`quad('exp(-2*x)'',0,1/8)`数据拟合`%n 是我们要 MATLAB 求出的多项式的次数%对于 y = mx + b 形式的方程,我们把 n 设为等于 1,%因此调用的语句将是 polyfit(x, y, 1)%n次多项式有n+1个常数系数polyfit(x, y, n)如果我们使用 p = polyfit(x, y, n)调用 polyfit,第 j 个系数的引用写成 p(j)m = p(1)b = p(2)`指数函数的拟合![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_24_20171115064102728.png)拟合程度当r^2接近1，或者，RMS小于1，则说明拟合程度比较好。![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_25_20171115064103775.png)`%其中，AVE是原有的数据，MEAN是原有数据的平均值，w是拟合数据，S和A公用的数据是AVE，即原有数据S = sum((Ave - MEAN).^2)A = sum((w - Ave).^2)r2 = 1 - A/S`另一种我们可以用来体现拟合程度的方法是计算一个称为均方根(Root-Mean-Square,RMS)误差的数 值,要用过这种方法来评估多项式与实际数据的拟合程度,我们可以使用下面的命令:![img](http://image109.360doc.com/DownloadImg/2017/11/1518/116266051_26_20171115064104416.png)`w = m*sqft + bd = price - w;N = 10;d2 = d.^2;RMS = sqrt((1/N)*sum(d2))`可以使用 find 命令提问与数据有关的问题。例如,温度小于 80 度是在什么时候`find(y < 80)`









## MATLAB复习资料

**第一章   MATLAB基础知识**

\1.   MATLAB的主要功能：数值计算和符号计算功能、绘图功能、程序设计语言功能、扩展功能。

\2.   MATLAB的集成开发环境包括多个窗口：除了MATLAB主窗口外，还有命令窗口、工作空间窗口、命令历史窗口和当前目录窗口。

\3.   变量的命名规则：变量名是以字母开头，后接字母、数字或下划线的字符序列，最多63个字符，变量名区分字母的大小写, MATLAB中的特殊变量名，应避免使用。

\4.   MATLAB提供了6种关系运算符，三种逻辑运算符，四个逻辑运算函数。

\5.   矩阵相乘：m*n; 矩阵元素相乘（数组相乘）：.*

右除，“/” ：A/B=A*B-1  (B的逆矩阵inv(B))， B必须是方阵,

A与B列应相等；“./” ：A./B为A各元素除以B中各元素。

矩阵乘方 ：A^标量；元素的乘方：A.^标量

\6.   写出完成下列操作的指令：

1)  将矩阵A第2到5行中的第 1、3、5列元素赋值给矩阵: B=A(2:5,1:2:5)

2)  删除矩阵A的第七号元素: A(7)=[]

3)  将矩阵A的每个元素值加30: A=A+30

4)  求矩阵A的大小和维数: size(A);ndims(A)

5)  将向量t的0元素用机械零来代替: t(find(t==0))=eps

6)  将含有12个元素的向量x转换成3*4矩阵: t=reshape(x,3,4)

7)  求一个字符串的ASCII: abs('matlab')

8)  求一个ASCII对应的字符: char(93)

 

**第二章    MATLAB程序设计**

**Lower** **大写转换为小写    upper  小写转换为大写**

**Fix** **求商    rem求余**

\1.   MATLAB有两种执行方式：一种是交互式的命令执行方式；一种是程序执行方式。

\2.   M文件可以根据调用方式的不同分为两大类：命令文件和函数文件。

\3.   命令文件和函数文件的主要区别在于：

1)  命令文件是一系列命令的组合，函数文件的第一行必须用function说明；

2)  命令文件没有输入参数，也不用返回参数，函数文件可以接受输入参数，也可以返回参数；

3)  命令文件处理的变量为工作空间变量，函数文件处理的变量为函数内部的局部变量，也可以处理全局变量。

\4.   函数调用的一般格式为：【输出实参数】=函数名【输入实参数】

 

\5.   全局变量用global命令定义，格式为：global 变量名

 

\6.   什么是M文件？如何建立并执行一个M文件？

答：用MATLAB语言编写的程序称为M文件；在matlab命令窗口点击file 菜单new ® m-file

\7.   程序的基本控制结构有几种？在matlab中如何实现？

任何程序都有三种基本控制结构组成：顺序结构、选择结构、循环结构。实现顺序结构的语句有input和disp等，实现选择结构的语句有if、switch和try语句，实现循环结构的语句有for和while。

 

**第三章   图形绘制**

 

\1.   MATLAB有两类绘图命令，一是直接对图形句柄进行操作的低层绘图命令，另一类是在低层绘图基础上建立起来的高层绘图命令。

\2.   78页第2题

（1）

```matlab
    clc;

    clear;

x1=linspace(0,1,100); 

y1=2*x1-0.5; 

t=linspace(0,pi,100); 

x=sin(3*t).*cos(t);

y=sin(3*t).*sin(t);

plot(x1,y1,'r-',x,y,'b:');

text(0.4,1,'y=2x-0.5');

text(-0.4,0.5,'x=sin(3t)cos(t)');

text(-0.4,0.3,'y=sin(3t)sin(t)');
```







![img](file:////Users/tianzi/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image002.jpg)

 

（2） 

```matlab
clc;

clear;

x=1:100;

y=2*x-0.5

subplot(1,2,1); 

bar(y);

title('y=2x-0.5');

t=0:pi/100:pi;

x1=sin(3*t).*cos(t);

y1=sin(9*t).*sin(t);

subplot(1,2,2);

scatter(x1,y1,10);

title('x1=sin(3*t).*cos(t),y1=sin(9*t).*sin(t)');
```







 

![img](file:////Users/tianzi/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image004.jpg)

\3.   78页第3题

```matlab
clc;

clear;

x=1:100;

y=sin(1./x);

subplot(1,2,1);

plot(x,y);

subplot(1,2,2); 

fplot('sin(1/x)',[1,100]);


```



 

 

![img](file:////Users/tianzi/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image006.jpg)

 

**第四章   线性代数中的数值计算**

 

\1.   特殊矩阵有哪两类？分别举例加以说明。

答：通用特殊矩阵：零矩阵、幺矩阵、单位矩阵等，

​    面向特定应用的特殊矩阵：希耳伯特矩阵、范德伦矩阵、帕斯卡。

\2.   104页第三题

```


clc;

clear;

A=[31,1,0;-4,-1,0;4,-8,-2];

[V,D]=eig(A);

V

D
```



\3.   104页第四题

```
clc;

clear;

A=[2,-1,0,0,0,;-1,2,-1,0,0;0,-1,2,-1,0;0,0,-1,2,-1;0,0,0,-1,2]

b=[1,0,0,0,0]';

tic

x1=inv(A)*b;

toc

tic

x2=A\b;

toc

tic

[L,U]=lu(A);

x3=U\(L\b);

toc
```





**第六章  数值微积分与常微分方程求解**

 

\1.   134页第5题 

```
（1） yp=inline('-(1.2+sin(10*x))*y'); 

  [t,y]=ode23(yp,[0,5],1);  
```





 

\2.   求出该系统的频率响应并画出频率特性？

![img](file:////Users/tianzi/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image008.jpg) 

 

 

```matlab
clc;

clear all;

B=[3 6 9];A=[2 4 6 8];

w=linspace(0,10);

BB=polyval(B, j*w);

AA=polyval(A, j*w);

subplot(2,2,1);

plot(w,abs(BB ./ AA));

subplot(2,2,3);

plot(w,angle(BB ./ AA));

w1=logspace(-1,1);

B1=polyval(B,j*w1);

A1=polyval(A,j*w1);

subplot(2,2,2);

semilogx(w1,abs(B1./A1));

subplot(2,2,4);

semilogx(w1,angle(B1./A1));
```





![img](file:////Users/tianzi/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image010.jpg)

 

**第七章    符号计算**

\1.   MATLAB提供了两个建立符号对象的函数：sym和syms.

 

\2.   试比较下列表达式的数值计算和符号计算结果有何不同？如何将符号计算结果转换为数值计算结果？

（1） 1+1/2     （2）（1+x^(1/2)）/2

 

\3.   148页第1题

```
clc;

clear;

syms x y z;

a=[1,2,3;x,y,z;3,2,1]

rank(a) 

inv(a) 

det(a)

 
```





**第八章  图形句柄**

 

MATLAB的图形对象包括图形窗口、坐标轴、用户界面、曲线、曲面、文字、图像等。

 

低层绘图操作的基本思路是什么？他同高层绘图操作相比有何特点？

 

**第九章  图形用户界面设计**

 

\1.   什么是图形用户界面？它有何特点?

图形用户界面（GUI）是指由窗口、菜单、图标、光标、按键、对话框和文本等各种图形对象组成的用户界面。它让用户定制用户与Matlab的交互方式，而命令窗口不是唯一与Matlab的交互方式。

\2.   在MATLAB应用程序的用户界面中，常用的控件有哪些？各有什么作用？

MATLAB的用户界面设计工具有多个，常用的有图形用户界面设计窗口、对象属性查看器、菜单编辑器、位置调整工具、Tab顺序编辑器、工具栏编辑器、对象浏览器、M文件编辑器等。

\3.   在MATLAB中，GUI的设计方式有哪两种？各有何特点？

GUI的设计方式有以下两种：通过使用MATLAB提供的图形用户界面工具来创建GUI；

使用M文件创建GUI。

 

**第十章   Simulink仿真环境**

\1.   Simulink的主要功能是什么？应用Simulink进行系统仿真的主要步骤有哪些？

用于对动态系统进行建模和仿真。

仿真步骤：（1）建立系统仿真模型，包括添加模块、设置模块参数、进行模块连接等操作。

（2）设置仿真参数

（3）启动仿真并分析仿真结果

\2.   如何建立Simulink仿真模型？

 

\3.   在Simulink中有哪些求解微分方程的算法

利用微分积分器直接构造求解微分方程

利用传递函数模块建模

利用状态方程建模

 

 

**建立一个字符串向量，然后对该向量做如下处理。**

**（1）取第12～18个字符组成的子字符串。**

**（2）将字符串中的小写字母变成相应的大写字母，其余字符不变。**

**（3）统计字符串中小写字母的个数。**

 ```


ch='welcome to beijing';

subch=ch(12:18);         %取子字符串

k=find(ch>='a'&ch<='z'); %找小写字母的位置

%将小写字母变成相应的大写字母

ch(k)=ch(k)-('a'-'a'); 

char(ch)                

length(k)                %统计小写字母的个数

运行结果：ans =

​                                16
 ```



 

**编写一个双音频程序，显示某个键的波形：**

 

![img](file:////Users/tianzi/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image012.jpg)



```
% 产生一个双音频 
clc;
clear;
fs=8000;t=(0:1/fs:0.2);
f1=697;f2=1209;  %键1对应的两个频率
y=sin(2*pi*f1*t)+sin(2*pi*f2*t);
plot(t,y);
wavplay(y, fs) 
```





 

![1](file:////Users/tianzi/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image013.jpg)

 

 

**从键盘输入若干个数，当输入0时结束输入，求这些数的平均值和它们之和。**

程序如下：

```
sum=0;
cnt=0;
val=input('enter a number (end in 0):');
while (val~=0)
​     sum=sum+val;
​     cnt=cnt+1;
​     val=input('enter a number (end in 0):');
end
if (cnt > 0)
​    sum
​    mean=sum/cnt 
end

 
```





**输出100到200之间第一个能被7整除的数**

```
for  i=100:200
   if rem(i,7)~=0
​       continue
   end
   break
end
i 

 
```





**若一个数等于它的各个真因子之和，则称该数为完数，如6=1+2+3，所以6是完数。求[1,500]之间的全部完数。**



```matlab
for m=1:500
s=0;
for k=1:m/2
if rem(m,k)==0
s=s+k;
end
end
if m==s
disp(m);
end
end
```



 

## end